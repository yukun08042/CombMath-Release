[
  {
    "chapter_id": 4,
    "chapter_name": "线性常系数",
    "difficulty": 2,
    "problem_content": "设 $G_n = F_{2n}$，其中 $F_n$ 是第 $n$ 个斐波那契数（$F_n = F_{n-1} + F_{n-2},\\ n \\geq 2,\\ F_0 = 0,\\ F_1 = 1$）。\n\n1. 证明：$G_n - 3G_{n-1} + G_{n-2} = 0\\ (n \\geq 2)$；\n2. 求数列 $\\{G_n\\}$ 的母函数。",
    "problem_solution": "1. 证明递推关系\n\n由题意，$G_n = F_{2n}$，其中 $F_n$ 为斐波那契数列，满足\n$$F_n = F_{n-1} + F_{n-2},\\quad n \\geq 2,\\quad F_0 = 0,\\ F_1 = 1.$$\n\n对 $G_n$ 有：\n\n$$\n\\begin{aligned}\nG_n &= F_{2n} \\\\\n    &= F_{2n-1} + F_{2n-2} \\\\\n    &= (F_{2n-2} + F_{2n-3}) + F_{2n-2} \\\\\n    &= 2F_{2n-2} + F_{2n-3} \\\\\n    &= 2F_{2n-2} + (F_{2n-2} - F_{2n-4}) \\\\\n    &= 3F_{2n-2} - F_{2n-4} \\\\\n    &= 3G_{n-1} - G_{n-2}.\n\\end{aligned}\n$$\n\n因此，当 $n \\geq 2$ 时，有\n$$G_n - 3G_{n-1} + G_{n-2} = 0.$$\n\n2. 求母函数\n\n设数列 $\\{G_n\\}$ 的母函数为\n$$g(x) = \\sum_{n=0}^{\\infty} G_n x^n.$$\n\n由 $G_n = F_{2n}$ 且 $F_0 = 0,\\ F_1 = 1$ 可得\n$$G_0 = F_0 = 0,\\quad G_1 = F_2 = 1.$$\n\n利用在第 1 问中得到的递推关系 $G_n = 3G_{n-1} - G_{n-2}$（$n \\geq 2$），有：\n\n$$\n\\begin{aligned}\ng(x) &= G_0 + G_1 x + \\sum_{n=2}^{\\infty} G_n x^n \\\\\n     &= 0 + x + \\sum_{n=2}^{\\infty} (3G_{n-1} - G_{n-2}) x^n \\\\\n     &= x + 3\\sum_{n=2}^{\\infty} G_{n-1} x^n - \\sum_{n=2}^{\\infty} G_{n-2} x^n.\n\\end{aligned}\n$$\n\n对两个求和式分别变形：\n\n- 对 $\\sum_{n=2}^{\\infty} G_{n-1} x^n$，令 $k = n-1$，则 $n = k+1$，$k$ 从 1 起，得到\n  $$\\sum_{n=2}^{\\infty} G_{n-1} x^n = \\sum_{k=1}^{\\infty} G_k x^{k+1} = x \\sum_{k=1}^{\\infty} G_k x^k = x\\bigl(g(x) - G_0\\bigr) = xg(x).$$\n\n- 对 $\\sum_{n=2}^{\\infty} G_{n-2} x^n$，令 $m = n-2$，则 $n = m+2$，$m$ 从 0 起，得到\n  $$\\sum_{n=2}^{\\infty} G_{n-2} x^n = \\sum_{m=0}^{\\infty} G_m x^{m+2} = x^2 \\sum_{m=0}^{\\infty} G_m x^m = x^2 g(x).$$\n\n代入前式，得到\n\n$$\n\\begin{aligned}\ng(x) &= x + 3x g(x) - x^2 g(x).\n\\end{aligned}\n$$\n\n将含 $g(x)$ 的项移到同一侧：\n\n$$g(x)\\,(1 - 3x + x^2) = x.$$\n\n因此，数列 $\\{G_n\\}$ 的母函数为\n\n$$g(x) = \\frac{x}{1 - 3x + x^2}.$$",
    "problem_mindmap": {
      "nodes": [
        {
          "node_id": "N1",
          "node_type": "问题核心",
          "node_content": "已知 $G_n = F_{2n}$（$F_n$ 为斐波那契数），① 证明 $G_n - 3G_{n-1} + G_{n-2} = 0$；② 求数列 $\\{G_n\\}$ 的母函数 $g(x)$"
        },
        {
          "node_id": "N2",
          "node_type": "核心思路",
          "node_content": "利用斐波那契递推式 $F_n = F_{n-1} + F_{n-2}$，把 $F_{2n}$ 逐步展开并改写成 $F_{2n-2},F_{2n-4}$ 的线性组合，从而得到 $G_n$ 与 $G_{n-1},G_{n-2}$ 的关系"
        },
        {
          "node_id": "N3",
          "node_type": "关键结论",
          "node_content": "推演：$F_{2n} = F_{2n-1} + F_{2n-2} = (F_{2n-2} + F_{2n-3}) + F_{2n-2} = 2F_{2n-2} + F_{2n-3}$"
        },
        {
          "node_id": "N4",
          "node_type": "关键结论",
          "node_content": "由 $F_{k-2} = F_k - F_{k-1}$ 得 $F_{2n-3} = F_{2n-1} - F_{2n-2}$，代入整理成 $F_{2n} = 3F_{2n-2} - F_{2n-4}$，即 $G_n = 3G_{n-1} - G_{n-2}$"
        },
        {
          "node_id": "N5",
          "node_type": "关键结论",
          "node_content": "得到递推关系：$G_n - 3G_{n-1} + G_{n-2} = 0\\ (n \\ge 2)$"
        },
        {
          "node_id": "N6",
          "node_type": "核心思路",
          "node_content": "用线性递推数列的母函数方法：设 $g(x) = \\sum_{n=0}^{\\infty} G_n x^n$，把递推关系乘以 $x^n$ 求和，化简得到关于 $g(x)$ 的代数方程"
        },
        {
          "node_id": "N7",
          "node_type": "关键结论",
          "node_content": "由 $G_n = F_{2n}$ 且 $F_0 = 0, F_1 = 1$，先算初值：$G_0 = F_0 = 0,\\ G_1 = F_2 = 1$"
        },
        {
          "node_id": "N8",
          "node_type": "关键结论",
          "node_content": "写母函数并代入递推：\n$g(x) = G_0 + G_1 x + \\sum_{n=2}^{\\infty} G_n x^n = x + \\sum_{n=2}^{\\infty} (3G_{n-1} - G_{n-2})x^n$"
        },
        {
          "node_id": "N9",
          "node_type": "关键结论",
          "node_content": "用指标平移把含 $G_{n-1},G_{n-2}$ 的和式表示成 $g(x)$：\n$\\sum_{n=2}^{\\infty} G_{n-1} x^n = xg(x)$，\n$\\sum_{n=2}^{\\infty} G_{n-2} x^n = x^2 g(x)$"
        },
        {
          "node_id": "N10",
          "node_type": "关键结论",
          "node_content": "代回得到：$g(x) = x + 3xg(x) - x^2 g(x)$，整理：$g(x)(1 - 3x + x^2) = x$"
        },
        {
          "node_id": "N11",
          "node_type": "最终答案",
          "node_content": "① $G_n - 3G_{n-1} + G_{n-2} = 0$；\n② 母函数 $g(x) = \\dfrac{x}{1 - 3x + x^2}$"
        }
      ],
      "edges": [
        {
          "edge_id": "E1",
          "source": "N1",
          "target": "N2",
          "edge_content": "针对(1)选择策略：利用斐波那契递推"
        },
        {
          "edge_id": "E2",
          "source": "N2",
          "target": "N3",
          "edge_content": "按定义展开 $F_{2n}$"
        },
        {
          "edge_id": "E3",
          "source": "N3",
          "target": "N4",
          "edge_content": "用 $F_{k-2} = F_k - F_{k-1}$ 消去中间项"
        },
        {
          "edge_id": "E4",
          "source": "N4",
          "target": "N5",
          "edge_content": "改写成 $G_n,G_{n-1},G_{n-2}$ 的关系"
        },
        {
          "edge_id": "E5",
          "source": "N1",
          "target": "N6",
          "edge_content": "针对(2)选择策略：母函数法解线性递推"
        },
        {
          "edge_id": "E6",
          "source": "N6",
          "target": "N7",
          "edge_content": "确定初值以明确母函数首项"
        },
        {
          "edge_id": "E7",
          "source": "N6",
          "target": "N8",
          "edge_content": "将递推带入母函数表示式"
        },
        {
          "edge_id": "E8",
          "source": "N8",
          "target": "N9",
          "edge_content": "通过换元把求和式化为 $g(x)$"
        },
        {
          "edge_id": "E9",
          "source": "N9",
          "target": "N10",
          "edge_content": "合并同类项得到关于 $g(x)$ 的代数方程"
        },
        {
          "edge_id": "E10",
          "source": "N10",
          "target": "N11",
          "edge_content": "解方程得到 $g(x)$ 并与(1)结论一起给出答案"
        }
      ]
    }
  },
  {
    "chapter_id": 4,
    "chapter_name": "线性常系数",
    "difficulty": 2,
    "problem_content": "求解递推关系：\n\n$$\n\\begin{cases}\na_n - 2a_{n-1} + a_{n-2} = 4,\\quad n \\geq 2 \\\\\na_0 = 1,\\ a_1 = 3\n\\end{cases}\n$$",
    "problem_solution": "首先，将给定的非齐次递推关系提升为高阶齐次递推关系。\n\n1. 对方程 $(1)$ 中的 $n$ 用 $n-1$ 代换，得到\n\n   $$\n   a_{n-1} - 2a_{n-2} + a_{n-3} = 4 \\tag{3}\n   $$\n\n2. 计算 $(3)-(1)$，消去常数项 $4$，得到齐次递推关系：\n\n   $$\n   a_n - 3a_{n-1} + 3a_{n-2} - a_{n-3} = 0.\n   $$\n\n3. 写出对应的特征多项式：\n\n   $$\n   C(x) = x^3 - 3x^2 + 3x - 1 = (x - 1)^3 = 0.\n   $$\n\n   特征根为重根 $r = 1$（三重根），因此齐次方程的通解为\n\n   $$\n   a_n = A + Bn + Cn^2,\n   $$\n\n   其中 $A,B,C$ 为常数。\n\n4. 利用初始条件和原递推式确定常数：\n\n   - 代入 $n = 0$：\n\n     $$\n     a_0 = A = 1.\n     $$\n\n   - 代入 $n = 1$：\n\n     $$\n     a_1 = A + B + C = 3.\n     $$\n\n   - 代入 $n = 2$ 得到\n\n     $$\n     a_2 = A + 2B + 4C.\n     $$\n\n5. 由原递推关系 $(1)$，令 $n = 2$，有\n\n   $$\n   a_2 - 2a_1 + a_0 = 4 \\implies a_2 - 2\\cdot 3 + 1 = 4 \\implies a_2 = 9.\n   $$\n\n   将 $A = 1$、$a_2 = 9$ 代入\n\n   $$\n   a_2 = A + 2B + 4C = 9,\n   $$\n\n   联立\n\n   $$\n   \\begin{cases}\n   A = 1, \\\\\n   A + B + C = 3, \\\\\n   A + 2B + 4C = 9,\n   \\end{cases}\n   $$\n\n   解得\n\n   $$\n   A = 1,\\quad B = 0,\\quad C = 2.\n   $$\n\n6. 将常数代入通解，得到递推关系的解：\n\n   $$\n   a_n = 1 + 2n^2.\n   $$",
    "problem_mindmap": {
      "nodes": [
        {
          "node_id": "N1",
          "node_type": "问题核心",
          "node_content": "求满足递推关系 $a_n - 2a_{n-1} + a_{n-2} = 4$（$n\\ge2$），且 $a_0=1,a_1=3$ 的数列通项 $a_n$"
        },
        {
          "node_id": "N2",
          "node_type": "核心思路",
          "node_content": "通过“升阶消去常数项”将非齐次递推转化为高阶齐次递推，再用特征根法求通项并利用初值确定常数"
        },
        {
          "node_id": "N3",
          "node_type": "关键结论",
          "node_content": "把原式在 $n-1$ 处写成 $a_{n-1} - 2a_{n-2} + a_{n-3} = 4$，再用“(3)−(1)”消去常数项得到齐次递推：$a_n - 3a_{n-1} + 3a_{n-2} - a_{n-3} = 0$"
        },
        {
          "node_id": "N4",
          "node_type": "关键结论",
          "node_content": "写出齐次递推的特征多项式：$C(x)=x^3-3x^2+3x-1=(x-1)^3=0$，特征根为三重根 $r=1$"
        },
        {
          "node_id": "N5",
          "node_type": "关键结论",
          "node_content": "由重根 $r=1$ 的阶数为 3，齐次方程通解为二次多项式形式：$a_n = A + Bn + Cn^2$"
        },
        {
          "node_id": "N6",
          "node_type": "关键结论",
          "node_content": "利用初始条件代入通解：$n=0\\Rightarrow A=1$；$n=1\\Rightarrow A+B+C=3$；再令 $n=2$ 得 $a_2 = A+2B+4C$"
        },
        {
          "node_id": "N7",
          "node_type": "关键结论",
          "node_content": "由原递推在 $n=2$：$a_2-2a_1+a_0=4\\Rightarrow a_2=9$，与 $a_2=A+2B+4C$ 联立方程组：$\\begin{cases}A=1\\\\ A+B+C=3\\\\ A+2B+4C=9\\end{cases}$，解得 $A=1,B=0,C=2$"
        },
        {
          "node_id": "N8",
          "node_type": "最终答案",
          "node_content": "将 $A=1,B=0,C=2$ 代入通解，得到数列通项：$a_n = 1 + 2n^2$"
        }
      ],
      "edges": [
        {
          "edge_id": "E1",
          "source": "N1",
          "target": "N2",
          "edge_content": "确定总体策略"
        },
        {
          "edge_id": "E2",
          "source": "N2",
          "target": "N3",
          "edge_content": "升阶并消去常数项"
        },
        {
          "edge_id": "E3",
          "source": "N3",
          "target": "N4",
          "edge_content": "建立特征多项式"
        },
        {
          "edge_id": "E4",
          "source": "N4",
          "target": "N5",
          "edge_content": "由重根形式写出通解"
        },
        {
          "edge_id": "E5",
          "source": "N5",
          "target": "N6",
          "edge_content": "代入初始条件构建方程"
        },
        {
          "edge_id": "E6",
          "source": "N6",
          "target": "N7",
          "edge_content": "借助原递推求 $a_2$ 并解方程组"
        },
        {
          "edge_id": "E7",
          "source": "N7",
          "target": "N8",
          "edge_content": "代回通解得到通项式"
        }
      ]
    }
  },
  {
    "chapter_id": 4,
    "chapter_name": "线性常系数",
    "difficulty": 3,
    "problem_content": "求解递推关系：\n\n$$\n\\begin{cases}\na_n = 3a_{n-1} - 2a_{n-2} + 3 \\sin \\dfrac{n\\pi}{2},\\quad n \\geq 2 \\\\\na_0 = 5,\\quad a_1 = 3\n\\end{cases}\n$$",
    "problem_solution": "首先将递推关系改写为\n\n$$a_n - 3a_{n-1} + 2a_{n-2} = 3 \\sin \\dfrac{n\\pi}{2}.$$  \n这是一个具有常系数的非齐次线性递推关系。\n\n---\n\n### 1. 求特解\n\n设该非齐次方程的一个特解为与右端同频率的正弦与余弦线性组合：\n\n$$a_n^{(p)} = A \\cos \\dfrac{n\\pi}{2} + B \\sin \\dfrac{n\\pi}{2},$$\n\n其中 $A,B$ 为待定常数。\n\n将 $a_n^{(p)}$ 代入非齐次方程\n\n$$a_n - 3a_{n-1} + 2a_{n-2} = 3 \\sin \\dfrac{n\\pi}{2},$$\n\n对 $a_n^{(p)}, a_{n-1}^{(p)}, a_{n-2}^{(p)}$ 展开并整理，可得\n\n$$\\left(-A + 3B\\right) \\cos \\dfrac{n\\pi}{2} - \\left(B + 3A\\right) \\sin \\dfrac{n\\pi}{2} = 3 \\sin \\dfrac{n\\pi}{2}.$$\n\n比较两侧 $\\cos \\dfrac{n\\pi}{2}$ 与 $\\sin \\dfrac{n\\pi}{2}$ 的系数，得到方程组：\n\n$$\n\\begin{cases}\n-A + 3B = 0, \\\\\n-3A - B = 3.\n\\end{cases}\n$$\n\n解此方程组，得到\n\n$$A = -\\dfrac{9}{10},\\quad B = -\\dfrac{3}{10}.$$\n\n因此，一个特解为\n\n$$a_n^{(p)} = -\\dfrac{9}{10} \\cos \\dfrac{n\\pi}{2} - \\dfrac{3}{10} \\sin \\dfrac{n\\pi}{2}.$$\n\n---\n\n### 2. 求齐次解\n\n考虑对应的齐次方程：\n\n$$a_n - 3a_{n-1} + 2a_{n-2} = 0.$$\n\n设 $a_n = r^n$（$r \\neq 0$），代入上式得到特征方程：\n\n$$r^2 - 3r + 2 = 0,$$\n\n即\n\n$$(r - 1)(r - 2) = 0.$$\n\n特征根为\n\n$$r_1 = 1,\\quad r_2 = 2.$$\n\n由于特征根互异，齐次方程的一般解为\n\n$$a_n^{(h)} = C r_1^n + D r_2^n = C \\cdot 1^n + D \\cdot 2^n = C + D \\cdot 2^n,$$\n\n其中 $C,D$ 为常数。\n\n---\n\n### 3. 写出通解\n\n原递推关系的通解为齐次解与特解之和：\n\n$$\n\\begin{aligned}\na_n &= a_n^{(h)} + a_n^{(p)} \\\\\n&= C + D \\cdot 2^n - \\dfrac{9}{10} \\cos \\dfrac{n\\pi}{2} - \\dfrac{3}{10} \\sin \\dfrac{n\\pi}{2}.\\tag{*}\n\\end{aligned}\n$$\n\n---\n\n### 4. 利用初始条件求 $C,D$\n\n由初始条件 $a_0 = 5,\\ a_1 = 3$，将 $n=0$ 代入通解 $(*)$：\n\n$$\n\\begin{aligned}\na_0 &= C + D \\cdot 2^0 - \\dfrac{9}{10} \\cos 0 - \\dfrac{3}{10} \\sin 0 \\\\\n5 &= C + D - \\dfrac{9}{10}.\n\\end{aligned}\n$$\n\n故\n\n$$C + D = 5 + \\dfrac{9}{10} = \\dfrac{59}{10}.$$\n\n再将 $n=1$ 代入通解 $(*)$：\n\n$$\n\\begin{aligned}\na_1 &= C + D \\cdot 2^1 - \\dfrac{9}{10} \\cos \\dfrac{\\pi}{2} - \\dfrac{3}{10} \\sin \\dfrac{\\pi}{2} \\\\\n3 &= C + 2D - \\dfrac{3}{10}.\n\\end{aligned}\n$$\n\n于是\n\n$$C + 2D = 3 + \\dfrac{3}{10} = \\dfrac{33}{10}.$$\n\n由两式联立：\n\n$$\n\\begin{cases}\nC + D = \\dfrac{59}{10}, \\\\\nC + 2D = \\dfrac{33}{10},\n\\end{cases}\n$$\n\n相减得\n\n$$D = \\dfrac{33}{10} - \\dfrac{59}{10} = -\\dfrac{26}{10} = -\\dfrac{13}{5},$$\n\n代回即可得到\n\n$$C = \\dfrac{59}{10} - D = \\dfrac{59}{10} + \\dfrac{13}{5} = \\dfrac{59}{10} + \\dfrac{26}{10} = \\dfrac{85}{10} = \\dfrac{17}{2}.$$\n\n---\n\n### 5. 最终结果\n\n将 $C = \\dfrac{17}{2},\\ D = -\\dfrac{13}{5}$ 代入通解 $(*)$，得到递推关系的解：\n\n$$a_n = \\dfrac{17}{2} - \\dfrac{13}{5} \\cdot 2^n - \\dfrac{9}{10} \\cos \\dfrac{n\\pi}{2} - \\dfrac{3}{10} \\sin \\dfrac{n\\pi}{2}.$$",
    "problem_mindmap": {
      "nodes": [
        {
          "node_id": "N1",
          "node_type": "问题核心",
          "node_content": "求解非齐次线性递推：$a_n-3a_{n-1}+2a_{n-2}=3\\sin\\dfrac{n\\pi}{2}$，并利用 $a_0=5,a_1=3$ 确定通项 $a_n$"
        },
        {
          "node_id": "N2",
          "node_type": "核心思路",
          "node_content": "将递推拆为“齐次通解 + 非齐次特解”，再用初始条件求常数"
        },
        {
          "node_id": "N3",
          "node_type": "核心思路",
          "node_content": "求非齐次方程的一个特解 $a_n^{(p)}$（与右端同频率的三角形式）"
        },
        {
          "node_id": "N4",
          "node_type": "关键结论",
          "node_content": "设 $a_n^{(p)}=A\\cos\\dfrac{n\\pi}{2}+B\\sin\\dfrac{n\\pi}{2}$，代入递推并比较系数，解得 $A=-\\dfrac{9}{10},\\ B=-\\dfrac{3}{10}$，从而\n$a_n^{(p)}=-\\dfrac{9}{10}\\cos\\dfrac{n\\pi}{2}-\\dfrac{3}{10}\\sin\\dfrac{n\\pi}{2}$"
        },
        {
          "node_id": "N5",
          "node_type": "核心思路",
          "node_content": "求对应齐次方程 $a_n-3a_{n-1}+2a_{n-2}=0$ 的通解 $a_n^{(h)}$"
        },
        {
          "node_id": "N6",
          "node_type": "关键结论",
          "node_content": "设 $a_n=r^n$ 得特征方程 $r^2-3r+2=0$，解得特征根 $r_1=1,r_2=2$，齐次解为\n$a_n^{(h)}=C\\cdot1^n+D\\cdot2^n=C+D2^n$"
        },
        {
          "node_id": "N7",
          "node_type": "关键结论",
          "node_content": "原递推的通解为齐次解与特解之和：\n$a_n=C+D2^n-\\dfrac{9}{10}\\cos\\dfrac{n\\pi}{2}-\\dfrac{3}{10}\\sin\\dfrac{n\\pi}{2}$"
        },
        {
          "node_id": "N8",
          "node_type": "核心思路",
          "node_content": "利用初始条件 $a_0=5,\\ a_1=3$，代入通解建立关于 $C,D$ 的方程组"
        },
        {
          "node_id": "N9",
          "node_type": "关键结论",
          "node_content": "代入 $n=0,1$ 得\n$\\begin{cases}C+D=\\dfrac{59}{10},\\\\ C+2D=\\dfrac{33}{10},\\end{cases}$\n解得 $C=\\dfrac{17}{2},\\ D=-\\dfrac{13}{5}$"
        },
        {
          "node_id": "N10",
          "node_type": "最终答案",
          "node_content": "代回通解，得到递推关系的显式解：\n$a_n=\\dfrac{17}{2}-\\dfrac{13}{5}2^n-\\dfrac{9}{10}\\cos\\dfrac{n\\pi}{2}-\\dfrac{3}{10}\\sin\\dfrac{n\\pi}{2}$"
        }
      ],
      "edges": [
        {
          "edge_id": "E1",
          "source": "N1",
          "target": "N2",
          "edge_content": "确定总体策略"
        },
        {
          "edge_id": "E2",
          "source": "N2",
          "target": "N3",
          "edge_content": "求特解支路"
        },
        {
          "edge_id": "E3",
          "source": "N2",
          "target": "N5",
          "edge_content": "求齐次解支路"
        },
        {
          "edge_id": "E4",
          "source": "N3",
          "target": "N4",
          "edge_content": "代入并比较系数求 $A,B$"
        },
        {
          "edge_id": "E5",
          "source": "N5",
          "target": "N6",
          "edge_content": "特征方程求 $r_1,r_2$"
        },
        {
          "edge_id": "E6",
          "source": "N4",
          "target": "N7",
          "edge_content": "汇总特解"
        },
        {
          "edge_id": "E7",
          "source": "N6",
          "target": "N7",
          "edge_content": "汇总齐次解"
        },
        {
          "edge_id": "E8",
          "source": "N7",
          "target": "N8",
          "edge_content": "带入初值"
        },
        {
          "edge_id": "E9",
          "source": "N8",
          "target": "N9",
          "edge_content": "解出 $C,D$"
        },
        {
          "edge_id": "E10",
          "source": "N9",
          "target": "N10",
          "edge_content": "代回得到 $a_n$"
        }
      ]
    }
  },
  {
    "chapter_id": 4,
    "chapter_name": "线性常系数",
    "difficulty": 4,
    "problem_content": "计算 $\\displaystyle \\sum_{k=1}^n k^4$，并将结果化简为关于 $n$ 的多项式形式。",
    "problem_solution": "设\n\n$$a_n = \\sum_{k=1}^{n} k^4.$$\n\n---\n\n### 1. 建立初始差分方程\n\n由定义可得首阶差分关系：\n\n$$a_n - a_{n-1} = n^4.$$\n\n---\n\n### 2. 通过差分降低右侧多项式的次数\n\n目标是通过多次差分，将右端的 $n^4$ 逐步降次，直至变为常数，从而构造一个齐次线性递推关系式。\n\n#### (1) 第一次差分：右端为三次多项式\n\n对 $a_n - a_{n-1} = n^4$ 再做一次差分：\n\n$$(a_n - a_{n-1}) - (a_{n-1} - a_{n-2}) = n^4 - (n-1)^4,$$\n\n从而\n\n$$a_n - 2a_{n-1} + a_{n-2} = 4n^3 - 6n^2 + 4n - 1.$$\n\n#### (2) 第二次差分：右端为二次多项式\n\n继续对上一式做差分：\n\n$$(a_n - 2a_{n-1} + a_{n-2}) - (a_{n-1} - 2a_{n-2} + a_{n-3})$$\n$$= (4n^3 - 6n^2 + 4n - 1) - [4(n-1)^3 - 6(n-1)^2 + 4(n-1) - 1]$$\n$$= 12n^2 - 24n + 14,$$\n\n因此\n\n$$a_n - 3a_{n-1} + 3a_{n-2} - a_{n-3} = 12n^2 - 24n + 14.$$\n\n#### (3) 第三次差分：右端为一次多项式\n\n再次差分：\n\n$$(a_n - 3a_{n-1} + 3a_{n-2} - a_{n-3}) - (a_{n-1} - 3a_{n-2} + 3a_{n-3} - a_{n-4})$$\n$$= (12n^2 - 24n + 14) - [12(n-1)^2 - 24(n-1) + 14]$$\n$$= 24n - 36,$$\n\n于是\n\n$$a_n - 4a_{n-1} + 6a_{n-2} - 4a_{n-3} + a_{n-4} = 24n - 36.$$\n\n#### (4) 第四次差分：右端为常数\n\n再做一次差分：\n\n$$(a_n - 4a_{n-1} + 6a_{n-2} - 4a_{n-3} + a_{n-4})$$\n$$- (a_{n-1} - 4a_{n-2} + 6a_{n-3} - 4a_{n-4} + a_{n-5})$$\n$$= (24n - 36) - [24(n-1) - 36]$$\n$$= 24,$$\n\n从而得到\n\n$$a_n - 5a_{n-1} + 10a_{n-2} - 10a_{n-3} + 5a_{n-4} - a_{n-5} = 24.$$\n\n---\n\n### 3. 进一步差分得到齐次递推关系式\n\n对上式再进行一次差分：\n\n$$(a_n - 5a_{n-1} + 10a_{n-2} - 10a_{n-3} + 5a_{n-4} - a_{n-5})$$\n$$- (a_{n-1} - 5a_{n-2} + 10a_{n-3} - 10a_{n-4} + 5a_{n-5} - a_{n-6}) = 24 - 24 = 0,$$\n\n整理得到齐次线性递推关系：\n\n$$a_n - 6a_{n-1} + 15a_{n-2} - 20a_{n-3} + 15a_{n-4} - 6a_{n-5} + a_{n-6} = 0.$$\n\n对应的特征多项式为\n\n$$C(x) = x^6 - 6x^5 + 15x^4 - 20x^3 + 15x^2 - 6x + 1 = (x-1)^6 = 0.$$\n\n因此特征根为\n\n$$r = 1,$$\n\n且为 6 重根。对具有 $r=1$ 的六重根的此类递推，齐次解的一般形式可写作\n\n$$a_n^{(h)} = A_0 r^n \\binom{n}{0} + A_1 r^n \\binom{n}{1} + \\dots + A_{5} r^n \\binom{n}{5}.$$\n\n代入 $r = 1$ 得到\n\n$$a_n = A_0 + A_1 \\binom{n}{1} + A_2 \\binom{n}{2} + A_3 \\binom{n}{3} + A_4 \\binom{n}{4} + A_5 \\binom{n}{5},$$\n\n其中 $A_0, A_1, \\dots, A_5$ 为待定常数。\n\n---\n\n### 4. 代入初始条件求解系数\n\n由定义知\n\n$$a_n = \\sum_{k=1}^n k^4,$$\n\n故有\n\n- $a_0 = 0$,\n- $a_1 = 1^4 = 1$,\n- $a_2 = 1^4 + 2^4 = 17$,\n- $a_3 = 1^4 + 2^4 + 3^4 = 98$,\n- $a_4 = 1^4 + 2^4 + 3^4 + 4^4 = 354$,\n- $a_5 = 1^4 + 2^4 + 3^4 + 4^4 + 5^4 = 979$。\n\n将 $n = 0, 1, 2, 3, 4, 5$ 代入通解公式\n\n$$a_n = \\sum_{i=0}^5 A_i \\binom{n}{i},$$\n\n得到线性方程组：\n\n$$\\begin{cases}\nA_0 \\cdot 1 + A_1 \\cdot 0 + A_2 \\cdot 0 + A_3 \\cdot 0 + A_4 \\cdot 0 + A_5 \\cdot 0 = 0 \\\\\nA_0 \\cdot 1 + A_1 \\cdot 1 + A_2 \\cdot 0 + A_3 \\cdot 0 + A_4 \\cdot 0 + A_5 \\cdot 0 = 1 \\\\\nA_0 \\cdot 1 + A_1 \\cdot 2 + A_2 \\cdot 1 + A_3 \\cdot 0 + A_4 \\cdot 0 + A_5 \\cdot 0 = 17 \\\\\nA_0 \\cdot 1 + A_1 \\cdot 3 + A_2 \\cdot 3 + A_3 \\cdot 1 + A_4 \\cdot 0 + A_5 \\cdot 0 = 98 \\\\\nA_0 \\cdot 1 + A_1 \\cdot 4 + A_2 \\cdot 6 + A_3 \\cdot 4 + A_4 \\cdot 1 + A_5 \\cdot 0 = 354 \\\\\nA_0 \\cdot 1 + A_1 \\cdot 5 + A_2 \\cdot 10 + A_3 \\cdot 10 + A_4 \\cdot 5 + A_5 \\cdot 1 = 979\n\\end{cases}$$\n\n求解得\n\n$$A_0 = 0, \\quad A_1 = 1, \\quad A_2 = 15, \\quad A_3 = 50, \\quad A_4 = 60, \\quad A_5 = 24.$$\n\n因此\n\n$$a_n = 0\\binom{n}{0} + 1\\binom{n}{1} + 15\\binom{n}{2} + 50\\binom{n}{3} + 60\\binom{n}{4} + 24\\binom{n}{5}.$$\n\n上述即为 $\\displaystyle \\sum_{k=1}^n k^4$ 的关于 $n$ 的多项式表达式（可视需要再将组合数展开为标准多项式形式）。",
    "problem_mindmap": {
      "nodes": [
        {
          "node_id": "N1",
          "node_type": "问题核心",
          "node_content": "求 $a_n=\\displaystyle\\sum_{k=1}^n k^4$ 的关于 $n$ 的多项式形式"
        },
        {
          "node_id": "N2",
          "node_type": "核心思路",
          "node_content": "把求和看成数列 $a_n$，用多次差分把右端 $n^4$ 降次，构造高阶线性递推，再求通解"
        },
        {
          "node_id": "N3",
          "node_type": "关键结论",
          "node_content": "由定义得首阶差分：$a_n-a_{n-1}=n^4$"
        },
        {
          "node_id": "N4",
          "node_type": "核心思路",
          "node_content": "反复差分，直到右端变为常数，再差分一次得到齐次递推"
        },
        {
          "node_id": "N5",
          "node_type": "关键结论",
          "node_content": "经过 4 次差分：$a_n-5a_{n-1}+10a_{n-2}-10a_{n-3}+5a_{n-4}-a_{n-5}=24$（右端为常数）"
        },
        {
          "node_id": "N6",
          "node_type": "关键结论",
          "node_content": "再差分一次，得齐次递推：$a_n-6a_{n-1}+15a_{n-2}-20a_{n-3}+15a_{n-4}-6a_{n-5}+a_{n-6}=0$"
        },
        {
          "node_id": "N7",
          "node_type": "关键结论",
          "node_content": "特征多项式 $C(x)=x^6-6x^5+15x^4-20x^3+15x^2-6x+1=(x-1)^6$，唯一特征根 $r=1$，为 6 重根"
        },
        {
          "node_id": "N8",
          "node_type": "关键结论",
          "node_content": "齐次解一般形式：$a_n=\\displaystyle\\sum_{i=0}^5 A_i\\,1^n\\binom{n}{i}=A_0+ A_1\\binom{n}{1}+\\cdots+A_5\\binom{n}{5}$"
        },
        {
          "node_id": "N9",
          "node_type": "核心思路",
          "node_content": "利用原定义计算前几个 $a_n$，再代入通解，用初值求常数 $A_i$"
        },
        {
          "node_id": "N10",
          "node_type": "关键结论",
          "node_content": "由求和定义得：$a_0=0,a_1=1,a_2=17,a_3=98,a_4=354,a_5=979$"
        },
        {
          "node_id": "N11",
          "node_type": "关键结论",
          "node_content": "代入 $n=0,1,2,3,4,5$ 建立方程组，解得：$A_0=0,A_1=1,A_2=15,A_3=50,A_4=60,A_5=24$"
        },
        {
          "node_id": "N12",
          "node_type": "最终答案",
          "node_content": "得到多项式形式：$$\\sum_{k=1}^n k^4=a_n=\\binom{n}{1}+15\\binom{n}{2}+50\\binom{n}{3}+60\\binom{n}{4}+24\\binom{n}{5},$$ 可按需要将组合数展开为关于 $n$ 的标准多项式"
        }
      ],
      "edges": [
        {
          "edge_id": "E1",
          "source": "N1",
          "target": "N2",
          "edge_content": "整体策略"
        },
        {
          "edge_id": "E2",
          "source": "N2",
          "target": "N3",
          "edge_content": "设数列并写出首差分"
        },
        {
          "edge_id": "E3",
          "source": "N3",
          "target": "N4",
          "edge_content": "利用差分降次思想"
        },
        {
          "edge_id": "E4",
          "source": "N4",
          "target": "N5",
          "edge_content": "多次差分至常数项"
        },
        {
          "edge_id": "E5",
          "source": "N5",
          "target": "N6",
          "edge_content": "再差分得齐次递推"
        },
        {
          "edge_id": "E6",
          "source": "N6",
          "target": "N7",
          "edge_content": "写出特征多项式并求根"
        },
        {
          "edge_id": "E7",
          "source": "N7",
          "target": "N8",
          "edge_content": "由重根形式写通解"
        },
        {
          "edge_id": "E8",
          "source": "N8",
          "target": "N9",
          "edge_content": "转向利用初值确定系数"
        },
        {
          "edge_id": "E9",
          "source": "N9",
          "target": "N10",
          "edge_content": "由定义直接累加求 $a_n$"
        },
        {
          "edge_id": "E10",
          "source": "N10",
          "target": "N11",
          "edge_content": "代入通解解方程组"
        },
        {
          "edge_id": "E11",
          "source": "N11",
          "target": "N12",
          "edge_content": "将系数带回得到最终表达式"
        }
      ]
    }
  },
  {
    "chapter_id": 4,
    "chapter_name": "线性常系数",
    "difficulty": 3,
    "problem_content": "由字母 $A, B, C, D$ 组成允许重复的 $n$ 位字符串，其中子串 $AB$ 至少出现一次，求满足条件的字符串数目 $a_n$。",
    "problem_solution": "对满足条件的 $n$ 位字符串数目记为 $a_n$。\n\n根据对 $n$ 位字符串的分类讨论，可得到递推关系：\n$$a_n = 4 a_{n-1} + 4^{n-2} - a_{n-2}$$\n整理得线性常系数非齐次递推关系：\n$$a_n - 4 a_{n-1} + a_{n-2} = 4^{n-2} \\quad \\text{...(1)}$$\n\n---\n\n### 1. 齐次解 $a_n^{(h)}$\n\n考虑对应的齐次方程：\n$$a_n - 4 a_{n-1} + a_{n-2} = 0$$\n设 $a_n = r^n$，代入齐次方程得到特征方程：\n$$r^2 - 4r + 1 = 0$$\n求得特征根：\n$$r_{1,2} = \\frac{4 \\pm \\sqrt{16 - 4}}{2} = 2 \\pm \\sqrt{3}$$\n由于有两个相异特征根，齐次解可写为：\n$$a_n^{(h)} = B(2+\\sqrt{3})^n + C(2-\\sqrt{3})^n$$\n其中 $B, C$ 为待定常数。\n\n---\n\n### 2. 特解 $a_n^{(p)}$\n\n非齐次项为：\n$$4^{n-2} = \\frac{1}{16} \\cdot 4^n$$\n由于 $r = 4$ 不是特征方程 $r^2 - 4r + 1 = 0$ 的根，可以设特解形式为：\n$$a_n^{(p)} = A \\cdot 4^n$$\n将 $a_n^{(p)}$ 代入原方程 (1)：\n$$A \\cdot 4^n - 4(A \\cdot 4^{n-1}) + A \\cdot 4^{n-2} = 4^{n-2}$$\n将各项统一为以 $4^{n-2}$ 为因子的形式：\n$$A \\cdot 4^2 \\cdot 4^{n-2} - 4A \\cdot 4^1 \\cdot 4^{n-2} + A \\cdot 4^{n-2} = 4^{n-2}$$\n$$(16A - 16A + A) \\cdot 4^{n-2} = 1 \\cdot 4^{n-2}$$\n$$A \\cdot 4^{n-2} = 4^{n-2}$$\n比较系数可得：\n$$A = 1$$\n故特解为：\n$$a_n^{(p)} = 4^n$$\n\n---\n\n### 3. 通解 $a_n$\n\n通解等于齐次解与特解之和：\n$$a_n = a_n^{(h)} + a_n^{(p)} = 4^n + B(2+\\sqrt{3})^n + C(2-\\sqrt{3})^n \\quad \\text{...(2)}$$\n\n---\n\n### 4. 利用初始条件确定常数 $B, C$\n\n根据计数问题的含义：\n- 当字符串长度为 $0$ 时，不含子串 $AB$，故\n  $$a_0 = 0$$\n- 当字符串长度为 $1$ 时，可能的字符串为 $A, B, C, D$，均不含子串 $AB$，故\n  $$a_1 = 0$$\n\n将 $n=0$ 代入通解 (2)：\n$$a_0 = 4^0 + B(2+\\sqrt{3})^0 + C(2-\\sqrt{3})^0 = 0$$\n得到：\n$$1 + B + C = 0 \\quad \\text{...(3)}$$\n\n将 $n=1$ 代入通解 (2)：\n$$a_1 = 4^1 + B(2+\\sqrt{3})^1 + C(2-\\sqrt{3})^1 = 0$$\n得到：\n$$4 + (2+\\sqrt{3})B + (2-\\sqrt{3})C = 0 \\quad \\text{...(4)}$$\n\n由 (3) 得：\n$$C = -1 - B$$\n将其代入 (4)：\n$$4 + (2+\\sqrt{3})B + (2-\\sqrt{3})(-1-B) = 0$$\n化简：\n$$4 + 2B + \\sqrt{3}B - (2-\\sqrt{3}) - (2-\\sqrt{3})B = 0$$\n$$4 - 2 + \\bigl(2+\\sqrt{3} - (2-\\sqrt{3})\\bigr)B = 0$$\n$$2 + 2\\sqrt{3} B = 0$$\n故\n$$B = -\\frac{2}{2\\sqrt{3}} = -\\frac{1}{\\sqrt{3}} = -\\frac{\\sqrt{3}}{3}$$\n\n再代回 $C = -1 - B$：\n$$C = -1 - \\left(-\\frac{\\sqrt{3}}{3}\\right) = \\frac{\\sqrt{3}}{3} - 1 = \\frac{\\sqrt{3} - 3}{3}$$\n\n将 $B$ 和 $C$ 代回通解 (2)，并对系数进行整理：\n$$\n\\begin{aligned}\na_n &= 4^n + \\left(-\\frac{3+2\\sqrt{3}}{6}\\right)(2+\\sqrt{3})^n + \\left(\\frac{2\\sqrt{3}-3}{6}\\right)(2-\\sqrt{3})^n \\\\\n&= 4^n - \\frac{\\sqrt{3}}{6} \\left[\\frac{3}{\\sqrt{3}} + 2\\right] (2+\\sqrt{3})^n + \\frac{\\sqrt{3}}{6} \\left[2 - \\frac{3}{\\sqrt{3}}\\right] (2-\\sqrt{3})^n \\\\\n&= 4^n - \\frac{\\sqrt{3}}{6} (\\sqrt{3} + 2)(2+\\sqrt{3})^n + \\frac{\\sqrt{3}}{6} (2-\\sqrt{3})(2-\\sqrt{3})^n \\\\\n&= 4^n - \\frac{\\sqrt{3}}{6} (2+\\sqrt{3})^{n+1} + \\frac{\\sqrt{3}}{6} (2-\\sqrt{3})^{n+1}\n\\end{aligned}\n$$\n\n因此，所求满足“包含子串 $AB$ 至少一次”的 $n$ 位字符串数目为：\n$$a_n = 4^n - \\frac{\\sqrt{3}}{6} (2+\\sqrt{3})^{n+1} + \\frac{\\sqrt{3}}{6} (2-\\sqrt{3})^{n+1}$$",
    "problem_mindmap": {
      "nodes": [
        {
          "node_id": "N1",
          "node_type": "问题核心",
          "node_content": "统计由 $A,B,C,D$ 组成、长度为 $n$ 且子串 $AB$ 至少出现一次的字符串数 $a_n$"
        },
        {
          "node_id": "N2",
          "node_type": "核心思路",
          "node_content": "通过对 $n$ 位字符串分类，得到关于 $a_n$ 的线性递推式，再用递推方程通解法求显式公式"
        },
        {
          "node_id": "N3",
          "node_type": "关键结论",
          "node_content": "分类讨论 $n$ 位字符串前几位情况，得到递推关系：$a_n = 4a_{n-1} + 4^{n-2} - a_{n-2}$"
        },
        {
          "node_id": "N4",
          "node_type": "关键结论",
          "node_content": "整理为线性常系数非齐次递推：$a_n - 4a_{n-1} + a_{n-2} = 4^{n-2}$"
        },
        {
          "node_id": "N5",
          "node_type": "核心思路",
          "node_content": "先求对应齐次方程的通解，再求非齐次特解，最后叠加得到 $a_n$ 的通解形式"
        },
        {
          "node_id": "N6",
          "node_type": "关键结论",
          "node_content": "齐次方程 $a_n - 4a_{n-1} + a_{n-2} = 0$ 的特征方程 $r^2 - 4r + 1 = 0$，解得根 $r_1=2+\\sqrt{3}, r_2=2-\\sqrt{3}$"
        },
        {
          "node_id": "N7",
          "node_type": "关键结论",
          "node_content": "齐次解：$a_n^{(h)} = B(2+\\sqrt{3})^n + C(2-\\sqrt{3})^n$"
        },
        {
          "node_id": "N8",
          "node_type": "关键结论",
          "node_content": "非齐次项为 $4^{n-2} = \\tfrac{1}{16}4^n$，因 $4$ 不是特征根，设特解 $a_n^{(p)} = A\\cdot 4^n$"
        },
        {
          "node_id": "N9",
          "node_type": "关键结论",
          "node_content": "代入递推求得 $A=1$，故特解为 $a_n^{(p)} = 4^n$"
        },
        {
          "node_id": "N10",
          "node_type": "关键结论",
          "node_content": "通解：$a_n = 4^n + B(2+\\sqrt{3})^n + C(2-\\sqrt{3})^n$"
        },
        {
          "node_id": "N11",
          "node_type": "核心思路",
          "node_content": "利用边界情形给出的初始条件 $a_0,a_1$ 建立方程组，求出常数 $B,C$"
        },
        {
          "node_id": "N12",
          "node_type": "关键结论",
          "node_content": "由计数意义得 $a_0=0, a_1=0$，代入通解得到方程组：$1+B+C=0$，$4+(2+\\sqrt{3})B+(2-\\sqrt{3})C=0$"
        },
        {
          "node_id": "N13",
          "node_type": "关键结论",
          "node_content": "解方程组得 $B=-\\tfrac{\\sqrt{3}}{3},\\; C=\\tfrac{\\sqrt{3}-3}{3}$，代回通解并整理指数幂"
        },
        {
          "node_id": "N14",
          "node_type": "最终答案",
          "node_content": "所求数目为显式公式：$$a_n = 4^n - \\frac{\\sqrt{3}}{6}(2+\\sqrt{3})^{n+1} + \\frac{\\sqrt{3}}{6}(2-\\sqrt{3})^{n+1}$$"
        }
      ],
      "edges": [
        {
          "edge_id": "E1",
          "source": "N1",
          "target": "N2",
          "edge_content": "确定总体策略"
        },
        {
          "edge_id": "E2",
          "source": "N2",
          "target": "N3",
          "edge_content": "对 $n$ 位串分类计数"
        },
        {
          "edge_id": "E3",
          "source": "N3",
          "target": "N4",
          "edge_content": "整理得到标准形式"
        },
        {
          "edge_id": "E4",
          "source": "N4",
          "target": "N5",
          "edge_content": "采用递推方程通解法"
        },
        {
          "edge_id": "E5",
          "source": "N5",
          "target": "N6",
          "edge_content": "处理齐次部分"
        },
        {
          "edge_id": "E6",
          "source": "N6",
          "target": "N7",
          "edge_content": "写出齐次解"
        },
        {
          "edge_id": "E7",
          "source": "N5",
          "target": "N8",
          "edge_content": "处理非齐次部分"
        },
        {
          "edge_id": "E8",
          "source": "N8",
          "target": "N9",
          "edge_content": "代入求出特解"
        },
        {
          "edge_id": "E9",
          "source": "N7",
          "target": "N10",
          "edge_content": "与特解合并"
        },
        {
          "edge_id": "E10",
          "source": "N9",
          "target": "N10",
          "edge_content": "与齐次解合并"
        },
        {
          "edge_id": "E11",
          "source": "N10",
          "target": "N11",
          "edge_content": "引入初始条件确定常数"
        },
        {
          "edge_id": "E12",
          "source": "N11",
          "target": "N12",
          "edge_content": "列出关于 $B,C$ 的方程"
        },
        {
          "edge_id": "E13",
          "source": "N12",
          "target": "N13",
          "edge_content": "解方程组并整理表达式"
        },
        {
          "edge_id": "E14",
          "source": "N13",
          "target": "N14",
          "edge_content": "代回得到最终显式公式"
        }
      ]
    }
  },
  {
    "chapter_id": 4,
    "chapter_name": "线性常系数",
    "difficulty": 4,
    "problem_content": "考虑如下汉诺塔问题的变种：有 $A, B, C$ 三根柱子，初始时 $A$ 柱上有 $n$ 个圆盘，按直径从小到大的顺序编号为 $1$ 到 $n$；最终目标是将所有偶数编号的盘套在 $B$ 柱上，所有奇数编号的盘套在 $C$ 柱上。移动圆盘时的规则与经典汉诺塔问题相同，求所需的最小移动次数。",
    "problem_solution": "设 $a_n$ 为将 $n$ 个圆盘按给定规则（偶数编号盘移动到 $B$ 柱，奇数编号盘移动到 $C$ 柱）从 $A$ 柱移动到目标状态所需的最小移动次数。记 $b_n = 2^n - 1$ 为原始汉诺塔问题中，将 $n$ 个圆盘从一根柱子全部移到另一根柱子所需的最小移动次数。\n\n为建立递推关系，考虑将编号为 $n$ 的圆盘移动到其目标柱子的过程。以下以 $n$ 为偶数为例进行分析，此时圆盘 $n$ 的目标柱为 $B$，圆盘 $n-1$ 的目标柱为 $C$。将这两个最大圆盘归位的过程可分解为四个主要子步骤：\n\n1. **步骤 (1)：移动上面 $n-1$ 个圆盘**  \n   将圆盘 $1 \\sim n-1$ 从 $A$ 移到 $C$。由于最终目标仅要求偶数盘在 $B$、奇数盘在 $C$，此处暂时视作标准汉诺塔，将 $1 \\sim n-1$ 从 $A$ 移至单一柱子 $C$，所需步数为\n   $$a_I = b_{n-1} = 2^{n-1} - 1.$$\n\n2. **步骤 (2)：移动圆盘 $n$**  \n   此时 $1 \\sim n-1$ 已在 $C$ 柱上，$n$ 号盘在 $A$ 上。将 $n$ 从 $A$ 移到其目标柱 $B$，只需一步：\n   $$a_{II} = 1.$$\n\n3. **步骤 (3)：移动圆盘 $n-2$ 到 $B$**  \n   此时 $n$ 在 $B$ 上，$n-1$ 在 $C$ 上，$1 \\sim n-2$ 仍在 $C$ 上。为了将 $n-2$ 号盘移动到 $B$ 柱，必须先将其上方的圆盘 $1 \\sim n-3$ 从 $C$ 移到 $A$（可视作标准汉诺塔，将 $n-3$ 个盘从一根柱子移到另一根柱子）：\n   $$a_{III,1} = b_{n-3} = 2^{n-3} - 1.$$\n   接着，将圆盘 $n-2$ 从 $C$ 移到目标柱 $B$：\n   $$a_{III,2} = 1.$$\n\n4. **步骤 (4)：整理剩余 $1 \\sim n-3$ 个圆盘**  \n   此时 $1 \\sim n-3$ 在 $A$ 柱上，且较大的圆盘 $n, n-1, n-2$ 已按要求就位。根据题目规则，需要将 $1 \\sim n-3$ 分别移动到各自的目标柱（偶数编号盘到 $B$ 柱，奇数编号盘到 $C$ 柱）。这与原问题在规模为 $n-3$ 时完全同构，因此\n   $$a_{IV} = a_{n-3}.$$\n\n综上，将上述四部分加总得到\n$$a_n = a_I + a_{II} + a_{III,1} + a_{III,2} + a_{IV} = b_{n-1} + 1 + b_{n-3} + 1 + a_{n-3}, \\quad n \\ge 3.$$ \n代入 $b_k = 2^k - 1$ 得\n\\begin{align*}\na_n &= (2^{n-1} - 1) + 1 + (2^{n-3} - 1) + 1 + a_{n-3} \\\\\n    &= a_{n-3} + 2^{n-1} + 2^{n-3} \\\\\n    &= a_{n-3} + 5 \\cdot 2^{n-3}.\n\\end{align*}\n因此得到线性非齐次递推关系\n$$a_n - a_{n-3} = 5 \\cdot 2^{n-3}, \\quad n \\ge 3.$$\n\n接下来用线性常系数方法求解该递推关系。\n\n---\n\n### 1. 齐次解 $a_n^{(h)}$\n\n考虑对应的齐次方程：\n$$a_n - a_{n-3} = 0.$$\n令 $a_n = r^n$，代入得特征方程\n$$r^3 - 1 = 0.$$\n特征根为三次单位根：\n$$r_1 = 1, \\qquad r_2 = -\\frac{1}{2} + \\frac{\\sqrt{3}}{2} i = e^{i\\frac{2\\pi}{3}}, \\qquad r_3 = -\\frac{1}{2} - \\frac{\\sqrt{3}}{2} i = e^{-i\\frac{2\\pi}{3}}.$$\n利用欧拉公式将复指数形式化简为实函数形式，齐次通解可写为\n$$a_n^{(h)} = A_0 \\cdot 1^n + A_1 \\cos\\left(\\frac{2n\\pi}{3}\\right) + A_2 \\sin\\left(\\frac{2n\\pi}{3}\\right),$$\n其中 $A_0, A_1, A_2$ 为待定常数。\n\n---\n\n### 2. 特解 $a_n^{(p)}$\n\n非齐次项为\n$$5 \\cdot 2^{n-3} = \\frac{5}{8} \\cdot 2^n.$$\n由于 $r = 2$ 不是特征方程 $r^3 - 1 = 0$ 的根，可以设特解形式为\n$$a_n^{(p)} = A \\cdot 2^n.$$\n将其代入递推关系 $a_n - a_{n-3} = 5 \\cdot 2^{n-3}$：\n\\begin{align*}\nA \\cdot 2^n - A \\cdot 2^{n-3} &= 5 \\cdot 2^{n-3}, \\\\\nA \\cdot 2^3 \\cdot 2^{n-3} - A \\cdot 2^{n-3} &= 5 \\cdot 2^{n-3}, \\\\\n(8A - A) \\cdot 2^{n-3} &= 5 \\cdot 2^{n-3}, \\\\\n7A &= 5,\n\\end{align*}\n从而\n$$A = \\frac{5}{7}.$$\n因此特解为\n$$a_n^{(p)} = \\frac{5}{7} \\cdot 2^n.$$\n\n---\n\n### 3. 通解 $a_n$\n\n递推关系的一般解为齐次解与特解之和：\n$$a_n = A_0 + A_1 \\cos\\left(\\frac{2n\\pi}{3}\\right) + A_2 \\sin\\left(\\frac{2n\\pi}{3}\\right) + \\frac{5}{7} \\cdot 2^n. \\tag{2}$$\n\n---\n\n### 4. 确定常数 $A_0, A_1, A_2$\n\n根据具体问题，可以计算小规模时的最小移动次数，得到初始条件\n$$a_0 = 0, \\quad a_1 = 1, \\quad a_2 = 2.$$ \n将这些初始条件代入通解 $(2)$，得到线性方程组：\n$$\\begin{cases}\nA_0 + A_1 \\cos(0) + A_2 \\sin(0) + \\dfrac{5}{7} \\cdot 2^0 = 0, \\\\\nA_0 + A_1 \\cos\\left(\\dfrac{2\\pi}{3}\\right) + A_2 \\sin\\left(\\dfrac{2\\pi}{3}\\right) + \\dfrac{5}{7} \\cdot 2^1 = 1, \\\\\nA_0 + A_1 \\cos\\left(\\dfrac{4\\pi}{3}\\right) + A_2 \\sin\\left(\\dfrac{4\\pi}{3}\\right) + \\dfrac{5}{7} \\cdot 2^2 = 2.\n\\end{cases}$$\n代入三角函数的具体值\n$$\\cos\\left(\\frac{2\\pi}{3}\\right) = -\\frac{1}{2}, \\quad \\sin\\left(\\frac{2\\pi}{3}\\right) = \\frac{\\sqrt{3}}{2}, \\quad \\cos\\left(\\frac{4\\pi}{3}\\right) = -\\frac{1}{2}, \\quad \\sin\\left(\\frac{4\\pi}{3}\\right) = -\\frac{\\sqrt{3}}{2},$$\n方程组化简为\n$$\\begin{cases}\nA_0 + A_1 + 0 + \\dfrac{5}{7} = 0 \\quad \\Longrightarrow \\quad A_0 + A_1 = -\\dfrac{5}{7}, \\\\\nA_0 - \\dfrac{1}{2} A_1 + \\dfrac{\\sqrt{3}}{2} A_2 + \\dfrac{10}{7} = 1 \\quad \\Longrightarrow \\quad A_0 - \\dfrac{1}{2} A_1 + \\dfrac{\\sqrt{3}}{2} A_2 = -\\dfrac{3}{7}, \\\\\nA_0 - \\dfrac{1}{2} A_1 - \\dfrac{\\sqrt{3}}{2} A_2 + \\dfrac{20}{7} = 2 \\quad \\Longrightarrow \\quad A_0 - \\dfrac{1}{2} A_1 - \\dfrac{\\sqrt{3}}{2} A_2 = -\\dfrac{6}{7}.\n\\end{cases}$$\n解此线性方程组，得到\n$$A_0 = -\\frac{2}{3}, \\quad A_1 = -\\frac{1}{21}, \\quad A_2 = \\frac{\\sqrt{3}}{7}.$$\n\n---\n\n### 5. 最终表达式\n\n将上述常数代回通解 $(2)$，得到递推关系 $a_n - a_{n-3} = 5 \\cdot 2^{n-3}$ 的显式解为\n$$a_n = -\\frac{2}{3} - \\frac{1}{21} \\cos\\left(\\frac{2n\\pi}{3}\\right) + \\frac{\\sqrt{3}}{7} \\sin\\left(\\frac{2n\\pi}{3}\\right) + \\frac{5}{7} \\cdot 2^n.$$\n该式即为该汉诺塔变种问题在规模为 $n$ 时所需的最小移动次数的闭式表达。",
    "problem_mindmap": {
      "nodes": [
        {
          "node_id": "N1",
          "node_type": "问题核心",
          "node_content": "变种汉诺塔：$n$ 个盘从 $A$ 出发，偶数盘到 $B$，奇数盘到 $C$，求最小移动次数 $a_n$ 的显式表达"
        },
        {
          "node_id": "N2",
          "node_type": "核心思路",
          "node_content": "用“最大若干个盘归位”的分解思想建立关于 $a_n$ 的递推关系，再用线性递推通法求显式解"
        },
        {
          "node_id": "N3",
          "node_type": "关键结论",
          "node_content": "引入标准汉诺塔步数 $b_n = 2^n - 1$ 作为子过程的代价；设本题最小步数为 $a_n$"
        },
        {
          "node_id": "N4",
          "node_type": "关键结论",
          "node_content": "（以 $n$ 为偶数为例）围绕最大几个盘的归位分四块：\n1. 将 $1\\sim n-1$ 从 $A$ 全部移到 $C$：$a_I = b_{n-1}$；\n2. 将盘 $n$ 从 $A$ 移到 $B$：$a_{II}=1$；\n3. 标准汉诺塔挪开 $1\\sim n-3$，再将 $n-2$ 从 $C$ 移到 $B$：$a_{III,1}=b_{n-3}, a_{III,2}=1$；\n4. 剩余 $1\\sim n-3$ 按本题规则归位：$a_{IV}=a_{n-3}$"
        },
        {
          "node_id": "N5",
          "node_type": "关键结论",
          "node_content": "合并四块得到递推：\n$$a_n = b_{n-1} + 1 + b_{n-3} + 1 + a_{n-3}$$\n代入 $b_k=2^k-1$ 化简为\n$$a_n = a_{n-3} + 5\\cdot 2^{n-3},\\quad n\\ge 3$$"
        },
        {
          "node_id": "N6",
          "node_type": "核心思路",
          "node_content": "视为三阶常系数线性非齐次递推，用“齐次解 + 特解”的方法求通解"
        },
        {
          "node_id": "N7",
          "node_type": "关键结论",
          "node_content": "对应齐次方程：$a_n-a_{n-3}=0$，令 $a_n=r^n$ 得特征方程\n$$r^3-1=0$$\n其根为三次单位根 $1, e^{\\pm i\\frac{2\\pi}{3}}$"
        },
        {
          "node_id": "N8",
          "node_type": "关键结论",
          "node_content": "将复根改写为实形式，齐次解为\n$$a_n^{(h)} = A_0 + A_1\\cos\\tfrac{2n\\pi}{3} + A_2\\sin\\tfrac{2n\\pi}{3}$$"
        },
        {
          "node_id": "N9",
          "node_type": "关键结论",
          "node_content": "非齐次项为 $5\\cdot 2^{n-3} = \\tfrac{5}{8}\\cdot 2^n$，因 $r=2$ 不是特征根，设特解\n$$a_n^{(p)} = A\\cdot 2^n$$\n代入递推求得 $A = \\tfrac{5}{7}$，故\n$$a_n^{(p)} = \\tfrac{5}{7}\\cdot 2^n$$"
        },
        {
          "node_id": "N10",
          "node_type": "关键结论",
          "node_content": "线性递推的一般解为\n$$a_n = A_0 + A_1\\cos\\tfrac{2n\\pi}{3} + A_2\\sin\\tfrac{2n\\pi}{3} + \\tfrac{5}{7}\\cdot 2^n$$"
        },
        {
          "node_id": "N11",
          "node_type": "关键结论",
          "node_content": "由小规模情况计算初始条件：\n$$a_0=0,\\ a_1=1,\\ a_2=2$$\n代入通解，利用 $n=0,1,2$ 建立 3 元一次方程组求出常数"
        },
        {
          "node_id": "N12",
          "node_type": "关键结论",
          "node_content": "解得\n$$A_0=-\\tfrac{2}{3},\\quad A_1=-\\tfrac{1}{21},\\quad A_2=\\tfrac{\\sqrt{3}}{7}$$"
        },
        {
          "node_id": "N13",
          "node_type": "最终答案",
          "node_content": "最小移动次数的闭式表达为\n$$a_n = -\\frac{2}{3} - \\frac{1}{21}\\cos\\Bigl(\\frac{2n\\pi}{3}\\Bigr) + \\frac{\\sqrt{3}}{7}\\sin\\Bigl(\\frac{2n\\pi}{3}\\Bigr) + \\frac{5}{7}\\cdot 2^n$$"
        }
      ],
      "edges": [
        {
          "edge_id": "E1",
          "source": "N1",
          "target": "N2",
          "edge_content": "总体策略"
        },
        {
          "edge_id": "E2",
          "source": "N2",
          "target": "N3",
          "edge_content": "记号与辅助量"
        },
        {
          "edge_id": "E3",
          "source": "N3",
          "target": "N4",
          "edge_content": "按最大盘分解过程"
        },
        {
          "edge_id": "E4",
          "source": "N4",
          "target": "N5",
          "edge_content": "汇总四步得到递推"
        },
        {
          "edge_id": "E5",
          "source": "N5",
          "target": "N6",
          "edge_content": "转向解递推"
        },
        {
          "edge_id": "E6",
          "source": "N6",
          "target": "N7",
          "edge_content": "建立齐次方程"
        },
        {
          "edge_id": "E7",
          "source": "N7",
          "target": "N8",
          "edge_content": "写出齐次通解"
        },
        {
          "edge_id": "E8",
          "source": "N6",
          "target": "N9",
          "edge_content": "构造特解"
        },
        {
          "edge_id": "E9",
          "source": "N8",
          "target": "N10",
          "edge_content": "与特解合并"
        },
        {
          "edge_id": "E10",
          "source": "N9",
          "target": "N10",
          "edge_content": "与齐次解合并"
        },
        {
          "edge_id": "E11",
          "source": "N10",
          "target": "N11",
          "edge_content": "代入初值"
        },
        {
          "edge_id": "E12",
          "source": "N11",
          "target": "N12",
          "edge_content": "求出常数"
        },
        {
          "edge_id": "E13",
          "source": "N12",
          "target": "N13",
          "edge_content": "代回得到显式式"
        }
      ]
    }
  },
  {
    "chapter_id": 4,
    "chapter_name": "线性常系数",
    "difficulty": 3,
    "problem_content": "使用 $k$ 种字母组成长度为 $n$ 的字符串，但不允许相同字母连续出现 3 次，求方案数 $a_n$。",
    "problem_solution": "设满足要求的 $n$ 位字符串数目为 $a_n$。\n\n根据字符串最后两位是否相同进行分类讨论：\n- 若末两位不同，则在一个满足条件的 $(n-1)$ 位字符串末尾添加一个与最后一位不同的字母，有 $(k-1)a_{n-1}$ 种。\n- 若末两位相同，则在一个满足条件的 $(n-2)$ 位字符串末尾添加两个相同字母，并保证这两个字母与第 $(n-2)$ 位不同，有 $(k-1)a_{n-2}$ 种。\n\n因此，当 $n \\ge 3$ 时递推关系为\n$$a_n = (k-1)a_{n-1} + (k-1)a_{n-2}, \\quad n \\ge 3.$$\n整理得齐次线性递推关系：\n$$a_n - (k-1)a_{n-1} - (k-1)a_{n-2} = 0. \\tag{1}$$\n\n---\n\n**1. 求通解**\n\n设 $a_n = r^n$，代入递推关系 (1)，得到特征方程：\n$$r^2 - (k-1)r - (k-1) = 0.$$\n解得特征根 $r_1, r_2$：\n$$r_{1,2} = \\frac{(k-1) \\pm \\sqrt{(k-1)^2 - 4 \\cdot 1 \\cdot (-(k-1))}}{2} = \\frac{(k-1) \\pm \\sqrt{(k-1)(k+3)}}{2}.$$\n由于 $k>1$，两特征根互不相等，因此通解为\n$$a_n = A r_1^n + B r_2^n,$$\n其中 $A,B$ 为常数。\n\n---\n\n**2. 代入初始条件**\n\n原问题的实际初始条件为：\n- 长度为 1 时，任取 $k$ 种字母，故 $a_1 = k$；\n- 长度为 2 时，只需避免出现 3 个连续相同字母的限制，此时任何两位字符串均合法，故 $a_2 = k^2$。\n\n为便于利用递推式 (1)，由\n$$a_2 = (k-1)a_1 + (k-1)a_0$$\n可反求 $a_0$：\n$$k^2 = (k-1)k + (k-1)a_0 \\implies a_0 = \\frac{k}{k-1}.$$\n\n将 $n=0,1$ 代入通解：\n$$\\begin{cases}\nA r_1^0 + B r_2^0 = a_0, \\\\\nA r_1^1 + B r_2^1 = a_1\n\\end{cases}\n\\implies\n\\begin{cases}\nA + B = \\dfrac{k}{k-1}, \\\\\nA r_1 + B r_2 = k.\n\\end{cases}$$\n\n---\n\n**3. 求解 $A,B$**\n\n解上述线性方程组，得到 $A,B$ 的表达式。由行列式或消元可得（中间代数步骤略写，只保留等价变形）：\n$$\\begin{aligned}\nA &= \\frac{k}{2\\sqrt{(k-1)(k+3)}} \\left( r_2 - \\frac{k}{k-1} \\right) \\cdot \\frac{1}{r_2 - r_1} \\\\\n  &= \\frac{k}{2\\sqrt{k-1}} \\left(\\frac{1}{\\sqrt{k-1}} - \\frac{1}{\\sqrt{k+3}}\\right),\n\\end{aligned}$$\n$$\\begin{aligned}\nB &= \\frac{k}{2\\sqrt{(k-1)(k+3)}} \\left( \\frac{k}{k-1} - r_1 \\right) \\cdot \\frac{1}{r_1 - r_2} \\\\\n  &= \\frac{k}{2\\sqrt{k-1}} \\left(\\frac{1}{\\sqrt{k-1}} + \\frac{1}{\\sqrt{k+3}}\\right).\n\\end{aligned}$$\n\n上述变形仅对 $A,B$ 作代数化简，未改变其数值。\n\n---\n\n**4. 最终解**\n\n将 $A,B$ 代回通解，得到递推关系 (1) 的显式解：\n$$a_n = \\frac{k}{2\\sqrt{k-1}} \\left(\\frac{1}{\\sqrt{k-1}} - \\frac{1}{\\sqrt{k+3}}\\right) r_1^n\n+ \\frac{k}{2\\sqrt{k-1}} \\left(\\frac{1}{\\sqrt{k-1}} + \\frac{1}{\\sqrt{k+3}}\\right) r_2^n,$$\n其中\n$$r_1 = \\frac{(k-1) + \\sqrt{(k-1)(k+3)}}{2}, \\quad\nr_2 = \\frac{(k-1) - \\sqrt{(k-1)(k+3)}}{2}.$$\n\n因此，长度为 $n$ 的、由 $k$ 种字母组成且不含 3 个连续相同字母的字符串总数即为上述 $a_n$。",
    "problem_mindmap": {
      "nodes": [
        {
          "node_id": "N1",
          "node_type": "问题核心",
          "node_content": "使用 $k$ 种字母组成长度为 $n$ 的字符串，不含 3 个连续相同字母，求方案数 $a_n$ 的显式表达式"
        },
        {
          "node_id": "N2",
          "node_type": "核心思路",
          "node_content": "按最后两位字母是否相同分类，建立关于 $a_n$ 的线性递推关系"
        },
        {
          "node_id": "N3",
          "node_type": "分支/情况",
          "node_content": "情况一：末两位不同——在一个合法的 $(n-1)$ 位串末尾加一个与最后一位不同的字母"
        },
        {
          "node_id": "N4",
          "node_type": "关键结论",
          "node_content": "末两位不同的构造数为 $(k-1)a_{n-1}$"
        },
        {
          "node_id": "N5",
          "node_type": "分支/情况",
          "node_content": "情况二：末两位相同——在一个合法的 $(n-2)$ 位串末尾加两个相同且与第 $(n-2)$ 位不同的字母"
        },
        {
          "node_id": "N6",
          "node_type": "关键结论",
          "node_content": "末两位相同的构造数为 $(k-1)a_{n-2}$，从而 $a_n = (k-1)a_{n-1} + (k-1)a_{n-2}$（$n\\ge3$）"
        },
        {
          "node_id": "N7",
          "node_type": "关键结论",
          "node_content": "写成齐次线性递推：$a_n - (k-1)a_{n-1} - (k-1)a_{n-2}=0$"
        },
        {
          "node_id": "N8",
          "node_type": "核心思路",
          "node_content": "将线性递推转化为特征方程，求通解 $a_n = A r_1^n + B r_2^n$"
        },
        {
          "node_id": "N9",
          "node_type": "关键结论",
          "node_content": "设 $a_n=r^n$ 得特征方程：$r^2-(k-1)r-(k-1)=0$，解得两不同特征根 $r_1,r_2$"
        },
        {
          "node_id": "N10",
          "node_type": "关键结论",
          "node_content": "故通解：$a_n = A r_1^n + B r_2^n$（$A,B$ 待由初始条件确定）"
        },
        {
          "node_id": "N11",
          "node_type": "核心思路",
          "node_content": "利用原问题的初始条件 $a_1,a_2$ 以及递推式反求 $a_0$，建立关于 $A,B$ 的方程组"
        },
        {
          "node_id": "N12",
          "node_type": "关键结论",
          "node_content": "由含义得 $a_1=k,\\ a_2=k^2$，带入递推 $a_2=(k-1)a_1+(k-1)a_0$ 求得 $a_0=\\dfrac{k}{k-1}$"
        },
        {
          "node_id": "N13",
          "node_type": "关键结论",
          "node_content": "将 $n=0,1$ 代入通解，得方程组：$A+B=a_0,\\ Ar_1+Br_2=a_1$，从而可解出 $A,B$ 的显式表达式"
        },
        {
          "node_id": "N14",
          "node_type": "最终答案",
          "node_content": "把求得的 $A,B$ 代回 $a_n = A r_1^n + B r_2^n$，得到关于 $n,k$ 的显式公式，即为所有合法字符串的方案数 $a_n$"
        }
      ],
      "edges": [
        {
          "edge_id": "E1",
          "source": "N1",
          "target": "N2",
          "edge_content": "建立递推"
        },
        {
          "edge_id": "E2",
          "source": "N2",
          "target": "N3",
          "edge_content": "分类一"
        },
        {
          "edge_id": "E3",
          "source": "N2",
          "target": "N5",
          "edge_content": "分类二"
        },
        {
          "edge_id": "E4",
          "source": "N3",
          "target": "N4",
          "edge_content": "计数"
        },
        {
          "edge_id": "E5",
          "source": "N5",
          "target": "N6",
          "edge_content": "计数并合并"
        },
        {
          "edge_id": "E6",
          "source": "N6",
          "target": "N7",
          "edge_content": "整理为递推"
        },
        {
          "edge_id": "E7",
          "source": "N7",
          "target": "N8",
          "edge_content": "用特征根法求解"
        },
        {
          "edge_id": "E8",
          "source": "N8",
          "target": "N9",
          "edge_content": "建立特征方程"
        },
        {
          "edge_id": "E9",
          "source": "N9",
          "target": "N10",
          "edge_content": "得到通解形式"
        },
        {
          "edge_id": "E10",
          "source": "N10",
          "target": "N11",
          "edge_content": "需要初始条件"
        },
        {
          "edge_id": "E11",
          "source": "N11",
          "target": "N12",
          "edge_content": "由题意与递推求 $a_0$"
        },
        {
          "edge_id": "E12",
          "source": "N12",
          "target": "N13",
          "edge_content": "代入建立方程组"
        },
        {
          "edge_id": "E13",
          "source": "N13",
          "target": "N14",
          "edge_content": "代回得到显式解"
        }
      ]
    }
  },
  {
    "chapter_id": 4,
    "chapter_name": "线性常系数",
    "difficulty": 3,
    "problem_content": "设有 $m$ 个位置，一醉汉从位置 $1$ 出发，每次移动可以到达除当前位置外的任意位置，求移动 $n$ 次后仍然回到位置 $1$ 的不同路径数目。",
    "problem_solution": "设 $a_n$ 为移动 $n$ 次后仍回到位置 $1$ 的路径数。\n\n由于每次移动都必须更换位置，因此如果在第 $n$ 次移动后回到位置 $1$，则第 $n-1$ 次移动后一定不在位置 $1$。因此，$a_n$ 等价于“移动 $n-1$ 次后不在位置 $1$”的路径数。\n\n对比总路径数与回到位置 $1$ 的路径数，可得递推关系：\n$$a_n = (m-1)^{n-1} - a_{n-1}$$\n\n将其整理为线性常系数非齐次递推关系：\n$$a_n + a_{n-1} = (m-1)^{n-1} \\quad \\text{...(1)}$$\n\n---\n\n### 1. 求齐次解 $a_n^{(h)}$\n\n先考虑对应的齐次方程：\n$$a_n + a_{n-1} = 0$$\n\n设 $a_n = r^n$，代入得到特征方程：\n$$r + 1 = 0 \\implies r = -1$$\n\n因此齐次解为：\n$$a_n^{(h)} = A \\cdot (-1)^n$$\n其中 $A$ 为待定常数。\n\n---\n\n### 2. 求特解 $a_n^{(p)}$\n\n非齐次项为 $(m-1)^{n-1}$。由于 $r = m-1$ 不是特征根（即 $m-1 \\neq -1$），故可设特解形式为：\n$$a_n^{(p)} = B \\cdot (m-1)^{n-1}$$\n\n将其代入递推关系 $(1)$：\n$$B \\cdot (m-1)^{n-1} + B \\cdot (m-1)^{n-2} = (m-1)^{n-1}$$\n\n两边同除以 $(m-1)^{n-2}$，得到：\n$$B(m-1) + B = m-1$$\n$$B(m-1 + 1) = m-1$$\n$$Bm = m-1 \\implies B = \\frac{m-1}{m}$$\n\n因此特解为：\n$$a_n^{(p)} = \\frac{m-1}{m} \\cdot (m-1)^{n-1}$$\n\n---\n\n### 3. 求通解\n\n通解是齐次解与特解之和：\n$$a_n = a_n^{(h)} + a_n^{(p)} = A \\cdot (-1)^n + \\frac{m-1}{m} \\cdot (m-1)^{n-1} \\quad \\text{...(2)}$$\n\n---\n\n### 4. 确定常数 $A$\n\n利用初始条件确定常数。移动 $1$ 次后，必须从位置 $1$ 跳到某个非 $1$ 的位置，因此回到位置 $1$ 的路径数为\n$$a_1 = 0$$\n\n将 $n = 1$ 代入通解 $(2)$：\n$$a_1 = A \\cdot (-1)^1 + \\frac{m-1}{m} \\cdot (m-1)^{1-1} = 0$$\n即\n$$-A + \\frac{m-1}{m} \\cdot 1 = 0 \\implies A = \\frac{m-1}{m}$$\n\n---\n\n### 5. 最终解\n\n将 $A = \\frac{m-1}{m}$ 代回通解 $(2)$，得到递推关系的解：\n$$a_n = \\frac{m-1}{m} \\cdot (-1)^n + \\frac{m-1}{m} \\cdot (m-1)^{n-1}$$\n\n提取公因式 $\\frac{m-1}{m}$，最终可写为：\n$$a_n = \\frac{m-1}{m} \\left( (-1)^n + (m-1)^{n-1} \\right)$$",
    "problem_mindmap": {
      "nodes": [
        {
          "node_id": "N1",
          "node_type": "问题核心",
          "node_content": "有 $m$ 个位置，醉汉每步可到其他任意位置，求移动 $n$ 次后回到位置 $1$ 的路径数 $a_n$"
        },
        {
          "node_id": "N2",
          "node_type": "核心思路",
          "node_content": "用递推建模：把“第 $n$ 次回到 1”转化为“前 $n-1$ 步不在 1$”的路径计数，建立递推关系"
        },
        {
          "node_id": "N3",
          "node_type": "关键结论",
          "node_content": "若第 $n$ 步在位置 1，则第 $n-1$ 步必不在 1；第 $n-1$ 步不在 1 时第 $n$ 步有 $1$ 种走回 1 的方式"
        },
        {
          "node_id": "N4",
          "node_type": "关键结论",
          "node_content": "总路径数（不限制终点）为 $(m-1)^{n-1}$，故有递推：$a_n = (m-1)^{n-1} - a_{n-1}$，即 $a_n + a_{n-1} = (m-1)^{n-1}$"
        },
        {
          "node_id": "N5",
          "node_type": "核心思路",
          "node_content": "将递推式视为线性常系数非齐次递推，先求齐次解再求特解，最后利用初值确定常数"
        },
        {
          "node_id": "N6",
          "node_type": "关键结论",
          "node_content": "齐次方程 $a_n + a_{n-1} = 0$ 设 $a_n = r^n$，得特征根 $r=-1$，齐次解 $a_n^{(h)} = A(-1)^n$"
        },
        {
          "node_id": "N7",
          "node_type": "关键结论",
          "node_content": "非齐次项为 $(m-1)^{n-1}$，设特解 $a_n^{(p)} = B(m-1)^{n-1}$，代入得 $Bm = m-1$，故 $B = \\dfrac{m-1}{m}$"
        },
        {
          "node_id": "N8",
          "node_type": "关键结论",
          "node_content": "特解为 $a_n^{(p)} = \\dfrac{m-1}{m}(m-1)^{n-1}$，通解 $a_n = A(-1)^n + \\dfrac{m-1}{m}(m-1)^{n-1}$"
        },
        {
          "node_id": "N9",
          "node_type": "关键结论",
          "node_content": "初始条件：移动一次不可能回到 1，故 $a_1 = 0$"
        },
        {
          "node_id": "N10",
          "node_type": "关键结论",
          "node_content": "代入 $n=1$ 得 $0 = -A + \\dfrac{m-1}{m}$，解得 $A = \\dfrac{m-1}{m}$"
        },
        {
          "node_id": "N11",
          "node_type": "最终答案",
          "node_content": "代回通解：$a_n = \\dfrac{m-1}{m}\\big( (-1)^n + (m-1)^{n-1} \\big)$，为移动 $n$ 次后回到位置 1 的路径数"
        }
      ],
      "edges": [
        {
          "edge_id": "E1",
          "source": "N1",
          "target": "N2",
          "edge_content": "抽象为数列问题"
        },
        {
          "edge_id": "E2",
          "source": "N2",
          "target": "N3",
          "edge_content": "分析第 $n$ 步状态"
        },
        {
          "edge_id": "E3",
          "source": "N3",
          "target": "N4",
          "edge_content": "对比总路径与回到 1 的路径"
        },
        {
          "edge_id": "E4",
          "source": "N4",
          "target": "N5",
          "edge_content": "识别递推类型"
        },
        {
          "edge_id": "E5",
          "source": "N5",
          "target": "N6",
          "edge_content": "求齐次解"
        },
        {
          "edge_id": "E6",
          "source": "N5",
          "target": "N7",
          "edge_content": "求特解"
        },
        {
          "edge_id": "E7",
          "source": "N6",
          "target": "N8",
          "edge_content": "合并齐次解与特解"
        },
        {
          "edge_id": "E8",
          "source": "N7",
          "target": "N8",
          "edge_content": "合并齐次解与特解"
        },
        {
          "edge_id": "E9",
          "source": "N5",
          "target": "N9",
          "edge_content": "考虑初始条件"
        },
        {
          "edge_id": "E10",
          "source": "N9",
          "target": "N10",
          "edge_content": "代入通解求常数"
        },
        {
          "edge_id": "E11",
          "source": "N8",
          "target": "N11",
          "edge_content": "代入 $A$ 得显式公式"
        },
        {
          "edge_id": "E12",
          "source": "N10",
          "target": "N11",
          "edge_content": "用 $A=\\dfrac{m-1}{m}$ 精化结果"
        }
      ]
    }
  },
  {
    "chapter_id": 4,
    "chapter_name": "线性常系数",
    "difficulty": 4,
    "problem_content": "使用尺寸为 $1 \\times 1$ 的方砖、直角边长为 $1$ 的等腰直角三角形砖，以及斜边长为 $2$ 的等腰直角三角形砖，铺设 $1 \\times n$ 的路径，求：\n\n1. 所有可能的铺砖方案数；\n2. 每一种可能的铺砖方案中使用的砖数相加，得到的砖数的总和。",
    "problem_solution": "记方砖为 $S$，直角边长为 $1$ 的等腰直角小三角形为 $T1$，斜边长为 $2$ 的等腰直角大三角形为 $T2$。\n\n---\n\n### (1) 铺砖方案总数\n\n设 $a_n$ 为铺设 $1 \\times n$ 路径的所有方案总数，$b_n$ 为铺设 $1 \\times n$ 路径且**最后一块瓷砖为大三角形 $T2$** 的方案数。\n\n考虑铺设 $1 \\times n$ 的最后一部分占用的长度：\n\n- 若最后一块瓷砖只占用 $1 \\times 1$ 的区域，则对应的铺法来源于对前面 $1 \\times (n-1)$ 的任意铺设方案；\n- 若最后一块瓷砖占用 $1 \\times 2$ 的区域，则对应的铺法与大三角形 $T2$ 的放置有关，注意到其两侧的朝向可以产生倍数关系。\n\n由结构分析可建立递推关系：\n$$\n\\begin{cases}\n a_n = a_{n-1} + 2b_n, \\\\\n b_n = 2a_{n-1} + b_{n-1}.\n\\end{cases}\n$$\n\n对上式进行消元，得到关于 $a_n$ 的二阶线性递推：\n$$\na_n - 4a_{n-1} + a_{n-2} = 0.\n$$\n\n其特征方程为\n$$\nC(x) = x^2 - 4x + 1 = 0,\n$$\n求得特征根\n$$\nr_{1,2} = 2 \\pm \\sqrt{3}.\n$$\n\n因此，对应递推式的通解为\n$$\na_n = A(2 + \\sqrt{3})^n + B(2 - \\sqrt{3})^n.\n$$\n\n下面利用初始条件确定常数 $A,B$。\n\n- 当 $n = 1$（铺设 $1 \\times 1$ 路径）：\n  - 只用 1 块方砖 $S$；\n  - 或用两块小三角形 $T1$ 拼成 $1 \\times 1$ 区域（共有 2 种不同拼法）。\n  因此\n  $$a_1 = 1 + 2 = 3.$$\n\n- 当 $n = 2$（铺设 $1 \\times 2$ 路径）：\n  - 将 $1 \\times 2$ 看为两个相邻的 $1 \\times 1$ 区域，每个区域有 $a_1$ 种铺法，因此共有 $a_1 \\times a_1$ 种；\n  - 另外，使用一块大三角形 $T2$ 铺满 $1 \\times 2$ 区域时，因其可能的两种放置方式带来额外 2 种方案。\n  故\n  $$a_2 = a_1^2 + 2 = 3^2 + 2 = 11.$$\n\n将 $a_1 = 3$ 和 $a_2 = 11$ 代入通解\n$$\n\\begin{cases}\n a_1 = A(2+\\sqrt{3}) + B(2-\\sqrt{3}) = 3, \\\\\n a_2 = A(2+\\sqrt{3})^2 + B(2-\\sqrt{3})^2 = 11,\n\\end{cases}\n$$\n解得\n$$\nA = \\frac{3 + \\sqrt{3}}{6}, \\quad B = \\frac{3 - \\sqrt{3}}{6}.\n$$\n\n因此，铺设 $1 \\times n$ 路径的方案总数为\n$$\n\\boxed{a_n = \\frac{3 + \\sqrt{3}}{6} (2 + \\sqrt{3})^n + \\frac{3 - \\sqrt{3}}{6} (2 - \\sqrt{3})^n}.\n$$\n\n---\n\n### (2) 所有方案中砖数的总和\n\n设 $A_n$ 为所有 $a_n$ 种铺设方案中，所使用瓷砖数量的总和（即对每一种铺设方案中的砖数求和，再对所有方案求总和）。\n\n通过对铺设结构的分析，可以得到 $A_n$ 满足的线性递推关系为\n$$\nA_n - 4A_{n-1} + 4A_{n-2} - A_{n-3} = 0.\n$$\n\n其特征方程与 $a_n$ 的特征根相同，且由于递推的非齐次结构引入了 $n$ 因子的影响，可知 $A_n$ 的通解形式可以写为\n$$\nA_n = C(2 + \\sqrt{3})^n + D(2 - \\sqrt{3})^n + E\\,n(2 + \\sqrt{3})^n + F\\,n(2 - \\sqrt{3})^n.\n$$\n\n下面利用初始条件确定常数 $C, D, E, F$。\n\n- 当 $n = 0$（$1 \\times 0$ 路径）：无铺法或视为只有一种“空铺设”，其砖数为 $0$，因此\n  $$A_0 = 0.$$\n\n- 当 $n = 1$（$1 \\times 1$ 路径）：\n  - 使用 1 块方砖 $S$ 的方案：砖数为 1，对应 1 种方案；\n  - 使用 2 块小三角形 $T1$ 的方案：每种方案砖数为 2，一共有 2 种方案。\n  总砖数为\n  $$A_1 = 1 \\times 1 + 2 \\times 2 = 1 + 4 = 5.$$\n\n结合上述初始条件 $A_0 = 0, A_1 = 5$ 以及从递推关系中推导得到的辅助条件，可解出\n$$\nC = \\frac{\\sqrt{3}}{18}, \\quad D = -\\frac{\\sqrt{3}}{18}, \\quad E = \\frac{2 + \\sqrt{3}}{3}, \\quad F = \\frac{2 - \\sqrt{3}}{3}.\n$$\n\n代回通解可得所有铺设方案中砖数总和为\n$$\n\\boxed{A_n = \\left(\\frac{\\sqrt{3}}{18} + \\frac{2 + \\sqrt{3}}{3} \\, n\\right)(2 + \\sqrt{3})^n + \\left(-\\frac{\\sqrt{3}}{18} + \\frac{2 - \\sqrt{3}}{3} \\, n\\right)(2 - \\sqrt{3})^n}.\n$$",
    "problem_mindmap": {
      "nodes": [
        {
          "node_id": "N1",
          "node_type": "问题核心",
          "node_content": "用 $S,T1,T2$ 铺设 $1\\times n$ 路径：求 (1) 方案总数 $a_n$；(2) 所有方案中砖数总和 $A_n$"
        },
        {
          "node_id": "N2",
          "node_type": "核心思路",
          "node_content": "引入计数序列：$a_n$ 为全部铺法数；$b_n$ 为最后一块是大三角形 $T2$ 的铺法数"
        },
        {
          "node_id": "N3",
          "node_type": "核心思路",
          "node_content": "按最后一段占用长度（$1$ 或 $2$）分析 $1\\times n$ 铺法结构，建立递推关系"
        },
        {
          "node_id": "N4",
          "node_type": "关键结论",
          "node_content": "得到一阶递推组：$\\begin{cases} a_n = a_{n-1} + 2b_n,\\\\ b_n = 2a_{n-1} + b_{n-1}. \\end{cases}$"
        },
        {
          "node_id": "N5",
          "node_type": "关键结论",
          "node_content": "消元得到关于 $a_n$ 的二阶线性齐次递推：$a_n - 4a_{n-1} + a_{n-2} = 0$"
        },
        {
          "node_id": "N6",
          "node_type": "关键结论",
          "node_content": "求特征方程 $x^2 - 4x + 1 = 0$，根为 $r_{1,2}=2\\pm\\sqrt{3}$，得通解 $a_n = A(2+\\sqrt3)^n + B(2-\\sqrt3)^n$"
        },
        {
          "node_id": "N7",
          "node_type": "关键结论",
          "node_content": "用小规模情形求初值：$a_1=3$（$S$ 或两块 $T1$），$a_2=a_1^2+2=11$（两格独立铺或一块 $T2$）"
        },
        {
          "node_id": "N8",
          "node_type": "关键结论",
          "node_content": "联立 $\\begin{cases} a_1=3,\\\\ a_2=11 \\end{cases}$ 解得 $A=\\dfrac{3+\\sqrt3}{6},\\;B=\\dfrac{3-\\sqrt3}{6}$"
        },
        {
          "node_id": "N9",
          "node_type": "最终答案",
          "node_content": "铺法总数：$a_n = \\dfrac{3 + \\sqrt{3}}{6} (2 + \\sqrt{3})^n + \\dfrac{3 - \\sqrt{3}}{6} (2 - \\sqrt{3})^n$"
        },
        {
          "node_id": "N10",
          "node_type": "核心思路",
          "node_content": "设 $A_n$ 为所有 $a_n$ 种铺设中砖数总和，利用与 $a_n$ 类似的结构分析建立高阶递推"
        },
        {
          "node_id": "N11",
          "node_type": "关键结论",
          "node_content": "得到关于 $A_n$ 的三阶线性齐次递推：$A_n - 4A_{n-1} + 4A_{n-2} - A_{n-3} = 0$"
        },
        {
          "node_id": "N12",
          "node_type": "关键结论",
          "node_content": "因特征根仍为 $2\\pm\\sqrt3$，且递推来源于含 $n$ 的结构，设通解形式：$A_n = C(2+\\sqrt3)^n + D(2-\\sqrt3)^n + En(2+\\sqrt3)^n + Fn(2-\\sqrt3)^n$"
        },
        {
          "node_id": "N13",
          "node_type": "关键结论",
          "node_content": "给出初值：$A_0=0$（空铺设），$A_1=1\\times1+2\\times2=5$，并结合递推得到足够条件解出 $C,D,E,F$"
        },
        {
          "node_id": "N14",
          "node_type": "关键结论",
          "node_content": "解得常数：$C=\\dfrac{\\sqrt3}{18},\\;D=-\\dfrac{\\sqrt3}{18},\\;E=\\dfrac{2+\\sqrt3}{3},\\;F=\\dfrac{2-\\sqrt3}{3}$"
        },
        {
          "node_id": "N15",
          "node_type": "最终答案",
          "node_content": "砖数总和：$A_n = \\left(\\dfrac{\\sqrt{3}}{18} + \\dfrac{2 + \\sqrt{3}}{3}n\\right)(2 + \\sqrt{3})^n + \\left(-\\dfrac{\\sqrt{3}}{18} + \\dfrac{2 - \\sqrt{3}}{3}n\\right)(2 - \\sqrt{3})^n$"
        }
      ],
      "edges": [
        {
          "edge_id": "E1",
          "source": "N1",
          "target": "N2",
          "edge_content": "定义计数序列解决(1)"
        },
        {
          "edge_id": "E2",
          "source": "N2",
          "target": "N3",
          "edge_content": "从末端结构分析"
        },
        {
          "edge_id": "E3",
          "source": "N3",
          "target": "N4",
          "edge_content": "写出递推组"
        },
        {
          "edge_id": "E4",
          "source": "N4",
          "target": "N5",
          "edge_content": "消元得到单一递推"
        },
        {
          "edge_id": "E5",
          "source": "N5",
          "target": "N6",
          "edge_content": "求特征方程与通解"
        },
        {
          "edge_id": "E6",
          "source": "N6",
          "target": "N7",
          "edge_content": "通过小 $n$ 情形求初值"
        },
        {
          "edge_id": "E7",
          "source": "N7",
          "target": "N8",
          "edge_content": "联立求 $A,B$"
        },
        {
          "edge_id": "E8",
          "source": "N8",
          "target": "N9",
          "edge_content": "得到 $a_n$ 显式式"
        },
        {
          "edge_id": "E9",
          "source": "N1",
          "target": "N10",
          "edge_content": "转向问题(2)"
        },
        {
          "edge_id": "E10",
          "source": "N10",
          "target": "N11",
          "edge_content": "结构计数推导递推"
        },
        {
          "edge_id": "E11",
          "source": "N11",
          "target": "N12",
          "edge_content": "特征根与通解形式"
        },
        {
          "edge_id": "E12",
          "source": "N12",
          "target": "N13",
          "edge_content": "选择初值与辅助条件"
        },
        {
          "edge_id": "E13",
          "source": "N13",
          "target": "N14",
          "edge_content": "解 $C,D,E,F$"
        },
        {
          "edge_id": "E14",
          "source": "N14",
          "target": "N15",
          "edge_content": "写出 $A_n$ 显式式"
        }
      ]
    }
  },
  {
    "chapter_id": 4,
    "chapter_name": "线性常系数",
    "difficulty": 3,
    "problem_content": "用若干单位小方格和由三个单位小方格组成的“L”形砖铺满一个 $2 \\times n$ 的方格棋盘，记所有不同可能的铺法的数目为 $a_n$。\n\n(1) 求 $a_n$；\n\n(2) 求 $a_{2025}$ 的个位数字。",
    "problem_solution": "### (1) 求通项公式 $a_n$\n\n记 $a_n$ 为铺设 $2 \\times n$ 方格棋盘的不同铺法数目。考察最右侧部分的铺法，可以将所有铺法分为以下几种情况：\n\n1. **最后放置两个单位小方格**\n\n   最右侧为一个 $2 \\times 1$ 的区域，被两个 $1 \\times 1$ 小方格覆盖。去掉这 $2 \\times 1$ 后，剩下的是一个 $2 \\times (n-1)$ 的棋盘，铺法数为 $a_{n-1}$，因此这一类贡献为\n\n   $$1 \\cdot a_{n-1}.$$\n\n2. **最后放置一个“L”形砖和一个单位小方格**\n\n   最右侧占据一个 $2 \\times 2$ 的区域，其中包含一个“L”形砖和一个单位小方格。“L”形砖在 $2 \\times 2$ 中有 4 种方向放置。去掉这 $2 \\times 2$ 区域后，剩下的是一个 $2 \\times (n-2)$ 的棋盘，铺法数为 $a_{n-2}$，因此这一类贡献为\n\n   $$4 \\cdot a_{n-2}.$$\n\n3. **最后放置两个“L”形砖**\n\n   最右侧占据一个 $2 \\times 3$ 的区域，由两个“L”形砖拼成。它们有两种对称的组合方式。去掉这 $2 \\times 3$ 区域后，剩下的是一个 $2 \\times (n-3)$ 的棋盘，铺法数为 $a_{n-3}$，因此这一类贡献为\n\n   $$2 \\cdot a_{n-3}.$$\n\n综合三种情形，得到递推关系：\n\n$$a_n = a_{n-1} + 4a_{n-2} + 2a_{n-3}.$$\n\n整理为齐次线性递推形式：\n\n$$a_n - a_{n-1} - 4a_{n-2} - 2a_{n-3} = 0.$$\n\n因此特征方程为\n\n$$x^3 - x^2 - 4x - 2 = 0.$$\n\n解此特征方程，可得三个特征根分别为\n\n$$-1,\\quad 1 + \\sqrt{3},\\quad 1 - \\sqrt{3}.$$\n\n于是通项的通解形式为\n\n$$a_n = A(-1)^n + B(1 + \\sqrt{3})^n + C(1 - \\sqrt{3})^n,$$\n\n其中 $A,B,C$ 为常数，由初始条件确定。\n\n#### 初始条件\n\n- 当 $n = 0$（空棋盘）时，只有一种“什么都不放”的铺法：\n  $$a_0 = 1.$$\n- 当 $n = 1$（$2 \\times 1$ 棋盘）时，只能用 2 个 $1 \\times 1$ 小方格：\n  $$a_1 = 1.$$\n- 当 $n = 2$（$2 \\times 2$ 棋盘）时，有 1 种全部用 $1 \\times 1$ 的铺法，另有 4 种放置单个“L”形砖的铺法：\n  $$a_2 = 5.$$\n\n将 $a_0 = 1,\\ a_1 = 1,\\ a_2 = 5$ 代入通解表达式，解得\n\n$$A = 1, \\quad B = \\frac{\\sqrt{3}}{3}, \\quad C = -\\frac{\\sqrt{3}}{3}.$$\n\n因此，$a_n$ 的显式表达式为\n\n$$a_n = (-1)^n + \\frac{\\sqrt{3}}{3} (1 + \\sqrt{3})^n - \\frac{\\sqrt{3}}{3} (1 - \\sqrt{3})^n.$$\n\n---\n\n### (2) 求 $a_{2025}$ 的个位数字\n\n记\n\n$$b_n = a_n \\pmod{10}.$$ \n\n由于 $a_n$ 满足线性递推\n\n$$a_n = a_{n-1} + 4a_{n-2} + 2a_{n-3},$$\n\n在模 $10$ 意义下，$b_n$ 也满足同样的递推关系：\n\n$$b_n \\equiv b_{n-1} + 4b_{n-2} + 2b_{n-3} \\pmod{10}.$$\n\n初始值在模 $10$ 下为\n\n$$b_0 = 1, \\quad b_1 = 1, \\quad b_2 = 5.$$\n\n由于 $b_n$ 的取值仅为 $0,1,\\dots,9$ 共 10 种，且每一项由前三项唯一确定，序列 $(b_n)$ 必然是一个周期序列。\n\n通过逐项计算，可得序列 $b_n$ 的最小周期为\n\n$$T = 24.$$\n\n于是\n\n$$2025 = 24 \\times 84 + 9,$$\n\n从而\n\n$$a_{2025} \\equiv b_{2025} \\equiv b_{24 \\times 84 + 9} \\equiv b_9 \\pmod{10}.$$\n\n由已计算出的 $b_n$ 序列可知，当 $n = 9$ 时，\n\n$$b_9 = 5.$$\n\n因此\n\n$$a_{2025} \\pmod{10} = 5.$$",
    "problem_mindmap": {
      "nodes": [
        {
          "node_id": "N1",
          "node_type": "问题核心",
          "node_content": "用单位方格与“L”形砖铺满 $2\\times n$ 棋盘，求 $a_n$ 及 $a_{2025}$ 的个位数"
        },
        {
          "node_id": "N2",
          "node_type": "核心思路",
          "node_content": "对最右侧铺法分类，建立关于 $a_n$ 的线性递推关系"
        },
        {
          "node_id": "N3",
          "node_type": "分支/情况",
          "node_content": "情况1：最右侧为 $2\\times1$ 区域，两块 $1\\times1$ 小方格覆盖，贡献 $a_{n-1}$"
        },
        {
          "node_id": "N4",
          "node_type": "分支/情况",
          "node_content": "情况2：最右侧为 $2\\times2$ 区域，1 块“L”形砖 + 1 块 $1\\times1$，4 种方向，贡献 $4a_{n-2}$"
        },
        {
          "node_id": "N5",
          "node_type": "分支/情况",
          "node_content": "情况3：最右侧为 $2\\times3$ 区域，由 2 块“L”形砖拼成，2 种组合，贡献 $2a_{n-3}$"
        },
        {
          "node_id": "N6",
          "node_type": "关键结论",
          "node_content": "汇总得到递推式：$a_n = a_{n-1} + 4a_{n-2} + 2a_{n-3}$"
        },
        {
          "node_id": "N7",
          "node_type": "核心思路",
          "node_content": "将递推式化为齐次线性递推，解特征方程求通项"
        },
        {
          "node_id": "N8",
          "node_type": "关键结论",
          "node_content": "特征方程：$x^3 - x^2 - 4x - 2 = 0$，根为 $-1,\\ 1+\\sqrt3,\\ 1-\\sqrt3$"
        },
        {
          "node_id": "N9",
          "node_type": "关键结论",
          "node_content": "通解形式：$a_n = A(-1)^n + B(1+\\sqrt3)^n + C(1-\\sqrt3)^n$"
        },
        {
          "node_id": "N10",
          "node_type": "关键结论",
          "node_content": "用初值 $a_0=1,\\ a_1=1,\\ a_2=5$ 解得 $A=1,\\ B=\\tfrac{\\sqrt3}{3},\\ C=-\\tfrac{\\sqrt3}{3}$"
        },
        {
          "node_id": "N11",
          "node_type": "关键结论",
          "node_content": "通项公式：$a_n = (-1)^n + \\dfrac{\\sqrt3}{3}(1+\\sqrt3)^n - \\dfrac{\\sqrt3}{3}(1-\\sqrt3)^n$"
        },
        {
          "node_id": "N12",
          "node_type": "核心思路",
          "node_content": "研究 $a_n$ 在模 $10$ 下的递推与周期性，求 $a_{2025}$ 的个位"
        },
        {
          "node_id": "N13",
          "node_type": "关键结论",
          "node_content": "记 $b_n \\equiv a_n \\pmod{10}$，则有相同递推：$b_n \\equiv b_{n-1}+4b_{n-2}+2b_{n-3} \\pmod{10}$，初值 $b_0=1,b_1=1,b_2=5$"
        },
        {
          "node_id": "N14",
          "node_type": "关键结论",
          "node_content": "有限状态 + 唯一递推 ⇒ $(b_n)$ 为周期序列，计算得最小周期 $T=24$"
        },
        {
          "node_id": "N15",
          "node_type": "关键结论",
          "node_content": "$2025 = 24\\times84 + 9 \\Rightarrow b_{2025} = b_9$，由计算得 $b_9 = 5$"
        },
        {
          "node_id": "N16",
          "node_type": "最终答案",
          "node_content": "通项：$a_n = (-1)^n + \\dfrac{\\sqrt3}{3}(1+\\sqrt3)^n - \\dfrac{\\sqrt3}{3}(1-\\sqrt3)^n$；$a_{2025}$ 的个位数字为 $5$"
        }
      ],
      "edges": [
        {
          "edge_id": "E1",
          "source": "N1",
          "target": "N2",
          "edge_content": "先求递推"
        },
        {
          "edge_id": "E2",
          "source": "N2",
          "target": "N3",
          "edge_content": "分类1"
        },
        {
          "edge_id": "E3",
          "source": "N2",
          "target": "N4",
          "edge_content": "分类2"
        },
        {
          "edge_id": "E4",
          "source": "N2",
          "target": "N5",
          "edge_content": "分类3"
        },
        {
          "edge_id": "E5",
          "source": "N3",
          "target": "N6",
          "edge_content": "贡献到递推"
        },
        {
          "edge_id": "E6",
          "source": "N4",
          "target": "N6",
          "edge_content": "贡献到递推"
        },
        {
          "edge_id": "E7",
          "source": "N5",
          "target": "N6",
          "edge_content": "贡献到递推"
        },
        {
          "edge_id": "E8",
          "source": "N6",
          "target": "N7",
          "edge_content": "转为代数求通项"
        },
        {
          "edge_id": "E9",
          "source": "N7",
          "target": "N8",
          "edge_content": "解特征方程"
        },
        {
          "edge_id": "E10",
          "source": "N8",
          "target": "N9",
          "edge_content": "写出通解"
        },
        {
          "edge_id": "E11",
          "source": "N9",
          "target": "N10",
          "edge_content": "代入初值求常数"
        },
        {
          "edge_id": "E12",
          "source": "N10",
          "target": "N11",
          "edge_content": "得到显式通项"
        },
        {
          "edge_id": "E13",
          "source": "N1",
          "target": "N12",
          "edge_content": "转向个位问题"
        },
        {
          "edge_id": "E14",
          "source": "N6",
          "target": "N12",
          "edge_content": "利用同一递推"
        },
        {
          "edge_id": "E15",
          "source": "N12",
          "target": "N13",
          "edge_content": "在模10下建立递推"
        },
        {
          "edge_id": "E16",
          "source": "N13",
          "target": "N14",
          "edge_content": "利用有限状态推得周期"
        },
        {
          "edge_id": "E17",
          "source": "N14",
          "target": "N15",
          "edge_content": "用周期化简指数"
        },
        {
          "edge_id": "E18",
          "source": "N11",
          "target": "N16",
          "edge_content": "给出(1)的答案"
        },
        {
          "edge_id": "E19",
          "source": "N15",
          "target": "N16",
          "edge_content": "给出(2)的答案"
        }
      ]
    }
  }
]